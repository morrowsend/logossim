(this["webpackJsonp@logossim/page"]=this["webpackJsonp@logossim/page"]||[]).push([[0],{260:function(e,t,n){e.exports=function(){return new Worker(n.p+"SimulationWorker.2ceaba79c0a6339a281d.js")}},265:function(e){e.exports=JSON.parse('{"a":"0.0.1"}')},268:function(e,t,n){e.exports=n.p+"static/media/bifurcation.e3ec32b9.gif"},269:function(e,t,n){e.exports=n.p+"static/media/context-menu.94343183.gif"},270:function(e,t,n){e.exports=n.p+"static/media/simulation.2d0f910c.gif"},271:function(e,t,n){e.exports=n.p+"static/media/wire.e7e521da.gif"},273:function(e,t,n){e.exports=n(522)},521:function(e,t,n){},522:function(e,t,n){"use strict";n.r(t);var i=n(0),a=n.n(i),r=n(32),o=n.n(r),c=n(8),l=n(38),u=n.n(l),s=n(60),d=n(25),f=n(3),p=n(5),m=n(6),g=n(7),h=n(53),v=n(14),b=n(18),y=n(17),E=n(16),k=n(28),O=n.n(k),x=n(37),j=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:15;return e instanceof E.Point?new E.Point(Math.round(e.x/t)*t,Math.round(e.y/t)*t):Math.round(e/t)*t},P=function(e,t){return e&&t&&Math.round(e.x)===Math.round(t.x)&&Math.round(e.y)===Math.round(t.y)},w=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return Math.round(e.x)})).every((function(e,t,n){return e===n[0]}))},S=function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.map((function(e){return Math.round(e.y)})).every((function(e,t,n){return e===n[0]}))},C=function(){return w.apply(void 0,arguments)||S.apply(void 0,arguments)},L=function(e,t){var n=function(e,t){return Math.hypot(e.x-t.x,e.y-t.y)},i=function(e,t){var i=t.A,a=t.B,r=new E.Point(a.x-i.x,a.y-i.y),o=new E.Point(i.x-e.x,i.y-e.y),c=-(r.x*o.x+r.y*o.y)/(Math.pow(r.x,2)+Math.pow(r.y,2));if(c>=0&&c<=1){var l=new E.Point((1-c)*i.x+c*a.x,(1-c)*i.y+c*a.y);return{point:l,distance:n(e,l)}}var u=n(e,i),s=n(e,a);return u<=s?{point:i,distance:u}:{point:a,distance:s}};if(!t.hasMiddlePoint())return i(e,{A:t.getFirstPosition(),B:t.getLastPosition()}).point;var a=i(e,{A:t.getFirstPosition(),B:t.getMiddlePosition()}),r=i(e,{A:t.getMiddlePosition(),B:t.getLastPosition()});return a.distance<=r.distance?a.point:r.point},M=function(e,t){var n=t.A,i=t.B;if(w(n,e,i)){var a=Math.max(n.y,i.y);return Math.min(n.y,i.y)<=e.y&&e.y<=a}if(S(n,e,i)){var r=Math.max(n.x,i.x);return Math.min(n.x,i.x)<=e.x&&e.x<=r}return!1},A=function(e,t){return function(e,t){return M(e,{A:t.getFirstPosition(),B:t.getSecondPosition()})}(e,t)||function(e,t){return!!t.hasMiddlePoint()&&M(e,{A:t.getSecondPosition(),B:t.getLastPosition()})}(e,t)},T=function(e,t){var n=e.getLastPoint().getPosition();return Object.values(t.getModel().getLinkLayers()[0].getLinks()).find((function(t){return t.getID()!==e.getID()&&A(n,t)}))},B=function(e,t){return"Incompatible bit widths!\n\nSource: ".concat(e.getBits()," bit").concat(e.getBits()>1?"s":"","\n\nTarget: ").concat(t.getBits()," bit").concat(t.getBits()>1?"s":"")},I=n(31),N={1:1,2:3,4:15,8:255,16:65535},z=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return null===e||e>=0&&e<=N[t]},D=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,Object(c.a)({type:"link"},e))).bifurcations=[],i.bifurcationSource=null,i.bifurcationTarget=null,i.value=null,i.bits=null,i}return Object(p.a)(n,[{key:"addLabel",value:function(e){if(e instanceof k.LabelModel)return Object(b.a)(Object(y.a)(n.prototype),"addLabel",this).call(this,e);var t=new x.DefaultLabelModel;return t.setLabel(e),Object(b.a)(Object(y.a)(n.prototype),"addLabel",this).call(this,t)}},{key:"setBifurcationSource",value:function(e){this.bifurcationSource=e}},{key:"getBifurcationSource",value:function(){return this.bifurcationSource}},{key:"setBifurcationTarget",value:function(e){this.bifurcationTarget=e}},{key:"getBifurcationTarget",value:function(){return this.bifurcationTarget}},{key:"isBifurcation",value:function(){return!(!this.getBifurcationSource()&&!this.getBifurcationTarget())}},{key:"addBifurcation",value:function(e){this.bifurcations.find((function(t){return t.getID()===e.getID()}))||this.bifurcations.push(e)}},{key:"removeBifurcation",value:function(e){this.bifurcations=this.bifurcations.filter((function(t){return t.getID()!==e.getID()}))}},{key:"getBifurcations",value:function(){return this.bifurcations}},{key:"getAllBifurcations",value:function(){var e=Object(v.a)(this.bifurcations);return this.bifurcations.forEach((function(t){return e.push(t.getAllBifurcations())})),e.flat(1/0)}},{key:"getSelectionEntities",value:function(){return[].concat(Object(v.a)(Object(b.a)(Object(y.a)(n.prototype),"getSelectionEntities",this).call(this)),Object(v.a)(this.bifurcations))}},{key:"setSelected",value:function(e){Object(b.a)(Object(y.a)(n.prototype),"setSelected",this).call(this,e),this.bifurcations.forEach((function(t){return t.setSelected(e)})),this.getSourcePort()&&this.getSourcePort().setSelected(e),this.getTargetPort()&&this.getTargetPort().setSelected(e)}},{key:"remove",value:function(){this.bifurcations.forEach((function(e){return e.remove()})),this.bifurcationSource&&this.bifurcationSource.removeBifurcation(this),this.bifurcationTarget&&this.bifurcationTarget.removeBifurcation(this),Object(b.a)(Object(y.a)(n.prototype),"remove",this).call(this)}},{key:"serialize",value:function(){return Object(c.a)(Object(c.a)({},Object(b.a)(Object(y.a)(n.prototype),"serialize",this).call(this)),{},{bifurcations:this.bifurcations.map((function(e){return e.getID()})),bifurcationSource:this.bifurcationSource?this.bifurcationSource.getID():null,bifurcationTarget:this.bifurcationTarget?this.bifurcationTarget.getID():null,value:this.value,bits:this.bits})}},{key:"deserialize",value:function(e){var t=this;Object(b.a)(Object(y.a)(n.prototype),"deserialize",this).call(this,e);var i=e.getModel,a=e.registerModel,r=e.data,o=r.bifurcationSource,c=r.bifurcationTarget,l=r.bifurcations,u=r.bits;a(this),requestAnimationFrame((function(){t.bits=u,t.points=e.data.points.map((function(e){return new k.PointModel({link:t,position:new E.Point(e.x,e.y)})})),l.forEach((function(e){return i(e).then((function(e){return t.addBifurcation(e)}))})),o&&i(o).then((function(e){return t.setBifurcationSource(e)})),c&&i(c).then((function(e){return t.setBifurcationTarget(e)})),e.engine.repaintCanvas()}))}},{key:"addPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return Object(b.a)(Object(y.a)(n.prototype),"addPoint",this).call(this,e,t),e}},{key:"getMiddlePoint",value:function(){return this.hasMiddlePoint()?this.getPoints()[1]:null}},{key:"getSecondPoint",value:function(){return this.getPoints()[1]}},{key:"getSecondLastPoint",value:function(){var e=this.getPoints();return e[e.length-2]}},{key:"getFirstPosition",value:function(){return this.getFirstPoint().getPosition()}},{key:"getSecondPosition",value:function(){return this.getSecondPoint().getPosition()}},{key:"getMiddlePosition",value:function(){return this.hasMiddlePoint()?this.getMiddlePoint().getPosition():null}},{key:"getSecondLastPosition",value:function(){return this.getSecondLastPoint().getPosition()}},{key:"getLastPosition",value:function(){return this.getLastPoint().getPosition()}},{key:"hasMiddlePoint",value:function(){return 3===this.getPoints().length}},{key:"isStraight",value:function(){if(!this.hasMiddlePoint())return!0;var e=this.getFirstPosition(),t=this.getMiddlePosition(),n=this.getLastPosition();return!!C(e,t,n)}},{key:"getBits",value:function(){return this.bits}},{key:"setBits",value:function(e){if(![1,2,4,8,16].includes(e))throw new Error("[logossim] Number of bits should be one of: 1, 2, 4, 8 or 16");this.bits=e}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){this.value=e}},{key:"getColor",value:function(){return this.isSelected()?"var(--link-selected)":z(this.value,this.bits)?null===this.value?"var(--link-".concat(this.bits||1,"-bit-color)"):"var(--value-".concat(Math.round(this.value/N[this.bits]*10),")"):"var(--value-error)"}},{key:"getLineWidth",value:function(){return"var(--link-".concat(this.bits||1,"-bit-width)")}},{key:"getPointRadius",value:function(){return getComputedStyle(document.body).getPropertyValue("--link-".concat(this.bits||1,"-bit-join-radius"))}}]),n}(k.LinkModel),R=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return Object(f.a)(this,n),(e=t.call(this,Object(c.a)({type:"Port",maximumLinks:1},i))).value=null,e.input=null,e.bits=null,e}return Object(p.a)(n,[{key:"serialize",value:function(){return Object(c.a)(Object(c.a)({},Object(b.a)(Object(y.a)(n.prototype),"serialize",this).call(this)),{},{input:this.input,value:this.value,bits:this.bits})}},{key:"deserialize",value:function(e,t){Object(b.a)(Object(y.a)(n.prototype),"deserialize",this).call(this,e,t),this.value=e.data.value,this.input=e.data.input,this.bits=e.data.bits}},{key:"setAsInput",value:function(){this.input=!0}},{key:"setAsOutput",value:function(){this.input=!1}},{key:"isInput",value:function(){return!0===this.input}},{key:"isOutput",value:function(){return!1===this.input}},{key:"getBits",value:function(){return this.bits}},{key:"setBits",value:function(e){if(![1,2,4,8,16].includes(e))throw new Error("[logossim] Number of bits should be one of: 1, 2, 4, 8 or 16");this.bits=e}},{key:"getValue",value:function(){return this.value}},{key:"setValue",value:function(e){this.value=e}},{key:"isNewLinkAllowed",value:function(){return Object.keys(this.getLinks()).length<this.getMaximumLinks()}},{key:"canLinkToPort",value:function(e){return e.isNewLinkAllowed()&&this.getID()!==e.getID()}},{key:"createLinkModel",value:function(){if(this.isNewLinkAllowed()){var e=new D;return e.setBits(this.bits),e}return null}},{key:"getMainLink",value:function(){var e=Object.values(this.getLinks());return e.length>0?e[0]:null}},{key:"getColor",value:function(){var e=this.getMainLink();return e?e.getColor():"var(--port-unconnected)"}}]),n}(k.PortModel),F=function(){function e(){Object(f.a)(this,e),this.context=new AudioContext,this.destination=this.context.destination,this.audios={}}return Object(p.a)(e,[{key:"create",value:function(e){var t=e.id,n=e.frequency,i=void 0===n?1e3:n,a=e.waveform,r=void 0===a?"sine":a,o=this.context.createGain();o.gain.value=.5;var c=this.context.createOscillator();c.type=r,c.frequency.value=i,c.connect(o),c.start(),this.audios[t]={gainNode:o,oscillator:c}}},{key:"play",value:function(e){var t=e.id;try{this.getGainNode(t).connect(this.destination)}catch(n){}}},{key:"pause",value:function(e){var t=e.id;try{this.getGainNode(t).disconnect(this.destination)}catch(n){}}},{key:"setFrequency",value:function(e){var t=e.id,n=e.frequency;this.getOscillator(t).frequency.value=n}},{key:"setWaveform",value:function(e){var t=e.id,n=e.waveform;this.getOscillator(t).type=n}},{key:"handlePayload",value:function(e){switch(e.command){case"create":this.create(e);break;case"play":this.play(e);break;case"pause":this.pause(e);break;case"setFrequency":this.setFrequency(e);break;case"setWaveform":this.setWaveform(e)}}},{key:"getOscillator",value:function(e){return this.getAudio(e).oscillator}},{key:"getGainNode",value:function(e){return this.getAudio(e).gainNode}},{key:"getAudio",value:function(e){var t=this.audios[e];if(!t)throw new Error("[logossim] Audio with id ".concat(e," was not found."));return t}},{key:"cleanUp",value:function(){Object.values(this.audios).forEach((function(e){return e.oscillator.stop()})),this.audios=[]}}]),e}(),H=function(e){return e.map((function(e){return{id:e.getID(),type:e.getType(),configurations:e.configurations,ports:(n=e.ports,Object.values(n).map((function(e){return{id:e.getID(),name:e.getName(),input:e.isInput(),bits:e.getBits()}}))),properties:(t=e,Object.keys(t).filter((function(e){return!["listeners","options","position","ports","width","height","configurations","parent"].includes(e)}))).reduce((function(t,n){return Object(c.a)(Object(c.a)({},t),{},Object(I.a)({},n,e[n]))}),{})};var t,n}))},_=function(e){return e?{componentId:e.getParent().getID(),name:e.getName(),input:e.isInput()}:null},W=function(e){return e?e.getID():null},U=function(e,t){return{models:(i=t,i.map((function(e){var t,n=e.type,i=e.Model;return{type:n,methods:(t=i,Object.getOwnPropertyNames(t.prototype).filter((function(e){return!["constructor"].includes(e)}))).reduce((function(e,t){return Object(c.a)(Object(c.a)({},e),{},Object(I.a)({},t,i.prototype[t].toString()))}),{})}}))),links:(n=Object.values(e.getActiveLinkLayer().getModels()),n.map((function(e){return{id:e.getID(),source:_(e.getSourcePort()),target:_(e.getTargetPort()),bifurcations:e.getBifurcations().map((function(e){return e.getID()})),bifurcation:{source:W(e.getBifurcationSource()),target:W(e.getBifurcationTarget())},isBifurcation:e.isBifurcation(),bits:e.getBits()}}))),components:H(Object.values(e.getActiveNodeLayer().getModels()))};var n,i},V=n(260),Y=new(n.n(V).a),X=function(){function e(t){var n=this;Object(f.a)(this,e),this.onSimulationMessage=function(e){var t=e.data,i=t.type,a=t.payload;"diff"===i&&n.appendDiff(a),"audio"===i&&n.audioEngine.handlePayload(a),"clear"===i&&n.audioEngine.cleanUp()},this.components=t,this.worker=Y,this.worker.addEventListener("message",this.onSimulationMessage),this.audioEngine=new F,this.state="stopped",this.clearDiff()}return Object(p.a)(e,[{key:"start",value:function(e){this.worker.postMessage({command:"start",diagram:"stopped"===this.state?U(e,this.components):void 0}),this.state="started"}},{key:"pause",value:function(){this.worker.postMessage({command:"pause"}),this.state="paused"}},{key:"stop",value:function(){var e=Object(s.a)(u.a.mark((function e(){var t=this;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){t.worker.addEventListener("message",(function n(i){"clear"===i.data.type&&(t.worker.removeEventListener("message",n),t.state="stopped",e())})),t.worker.postMessage({command:"stop"})})));case 1:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}()},{key:"getState",value:function(){return this.state}},{key:"isRunning",value:function(){return"started"===this.state}},{key:"isPaused",value:function(){return"paused"===this.state}},{key:"isStopped",value:function(){return"stopped"===this.state}},{key:"getDiff",value:function(){return this.diff}},{key:"clearDiff",value:function(){this.diff={components:{},links:{}}}},{key:"appendDiff",value:function(e){this.diff={components:Object(c.a)(Object(c.a)({},this.diff.components),e.components),links:Object(c.a)(Object(c.a)({},this.diff.links),e.links)}}}]),e}(),K=function(e){return e instanceof R?e:new R({name:e})},Z=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e,i=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"generic";return Object(f.a)(this,n),(e=t.call(this,{type:a})).initialize(i),e.configurations=i,e}return Object(p.a)(n,[{key:"serialize",value:function(){return Object(c.a)(Object(c.a)({},Object(b.a)(Object(y.a)(n.prototype),"serialize",this).call(this)),{},{configurations:this.configurations})}},{key:"addInputPort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=K(e);i.setAsInput(),"string"===typeof e&&i.setBits(t),Object(b.a)(Object(y.a)(n.prototype),"addPort",this).call(this,i)}},{key:"addOutputPort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,i=K(e);i.setAsOutput(),"string"===typeof e&&i.setBits(t),Object(b.a)(Object(y.a)(n.prototype),"addPort",this).call(this,i)}},{key:"addPort",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=K(e);if(n.isInput())this.addInputPort(n,t);else{if(!n.isOutput())throw new Error("[logossim] Use either `addInputPort` or `addOutputPort`");this.addOutputPort(n,t)}}},{key:"removePort",value:function(e){var t=K(e);Object(b.a)(Object(y.a)(n.prototype),"removePort",this).call(this,t)}},{key:"getInputPorts",value:function(){return Object.fromEntries(Object.entries(this.getPorts()).filter((function(e){return Object(d.a)(e,2)[1].isInput()})))}},{key:"getOutputPorts",value:function(){return Object.fromEntries(Object.entries(this.getPorts()).filter((function(e){return!Object(d.a)(e,2)[1].isInput()})))}},{key:"getAllLinks",value:function(){return Object.values(this.getPorts()).map((function(e){return e.getMainLink()})).filter((function(e){return!!e})).reduce((function(e,t){return[].concat(Object(v.a)(e),[t],Object(v.a)(t.getAllBifurcations()))}),[])}},{key:"clone",value:function(){for(var e,t=arguments.length,i=new Array(t),a=0;a<t;a++)i[a]=arguments[a];var r=(e=Object(b.a)(Object(y.a)(n.prototype),"clone",this)).call.apply(e,[this].concat(i));return r.setPosition(new E.Point(this.getX()+15,this.getY()+15)),r}},{key:"initialize",value:function(){}},{key:"onSimulationStart",value:function(){}},{key:"onSimulationPause",value:function(){}},{key:"onSimulationStop",value:function(){}},{key:"step",value:function(){}},{key:"emit",value:function(e){!function(e,t){Y.postMessage({command:"emit",emitted:{from:e,value:t}})}(this.getID(),e)}},{key:"createAudio",value:function(){}},{key:"stepAndMask",value:function(e){var t=this,n=this.step(e);return Object.fromEntries(Object.entries(n).map((function(e){var n=Object(d.a)(e,2),i=n[0],a=n[1],r=t.getPort(i).bits,o=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=4294967295,i=n>>>32-t;return e&i}(a,r);return[i,z(o,r)?o:"error"]})))}}]),n}(k.NodeModel),G=n(19),q=n(10),J=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i,a=e.type,r=e.name,o=e.description,c=e.group,l=e.configurations,u=void 0===l?[]:l,s=e.model,d=e.widget,p=e.icon;return Object(f.a)(this,n),(i=t.call(this,a)).name=r,i.description=o,i.group=c,i.configurations=u,i.Model=s,i.Widget=d,i.Icon=p,i}return Object(p.a)(n,[{key:"generateReactWidget",value:function(e){var t=this.Widget,n=e.model;return a.a.createElement(G.MenuProvider,{id:"component",storeRef:!1,data:n},a.a.createElement(t,{engine:this.engine,model:n}))}},{key:"generateModel",value:function(e){var t=this.Model,n=e.initialConfig;return new t(n.configurations,n.type)}}]),n}(q.AbstractReactFactory),Q=n(1),$=n(2),ee=n(272);function te(){var e=Object(Q.a)(["\n  width: 100vw;\n  height: 100vh;\n"]);return te=function(){return e},e}var ne=$.a.div.attrs((function(e){var t=e.disabled,n=Object(ee.a)(e,["disabled"]);return Object(c.a)(Object(c.a)({},n),{},{onDragOver:function(e){return e.preventDefault()},onDrop:function(e){if(!t){var i=JSON.parse(e.dataTransfer.getData("component"));n.handleComponentDrop(e,i)}}})}))(te());function ie(){var e=Object(Q.a)(["\n  height: 100%;\n  width: 100%;\n"]);return ie=function(){return e},e}var ae=Object($.a)(q.CanvasWidget)(ie()),re=function(e){var t=e.engine;return a.a.createElement(G.MenuProvider,{id:"diagram",storeRef:!1,data:{test:1}},a.a.createElement(ne,{handleComponentDrop:function(){return t.handleComponentDrop.apply(t,arguments)},disabled:t.isLocked()},a.a.createElement(ae,{engine:t.getEngine()})))},oe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,e)).refPaths=[],i}return Object(p.a)(n,[{key:"componentDidUpdate",value:function(){this.updateRenderedPaths()}},{key:"componentDidMount",value:function(){this.updateRenderedPaths()}},{key:"componentWillUnmount",value:function(){this.clearRenderedPaths()}},{key:"updateRenderedPaths",value:function(){this.props.link.setRenderedPaths(this.refPaths.map((function(e){return e.current})))}},{key:"clearRenderedPaths",value:function(){this.props.link.setRenderedPaths([])}},{key:"generatePathPoints",value:function(){var e=this.props.link.getPoints();return e.map((function(t,n){return{from:e[n],to:e[n+1]}})).filter((function(e){return e.to}))}},{key:"generateLinePath",value:function(e){var t=e.from,n=e.to;return"M".concat(t.getX(),",").concat(t.getY()," L").concat(n.getX(),",").concat(n.getY())}},{key:"renderSegment",value:function(e,t){var n=this.props,i=n.link,r=n.factory,o=n.options,c=(void 0===o?{}:o).selected,l=a.a.createRef();return this.refPaths.push(l),a.a.cloneElement(r.generateLinkSegment(i,c,e),{key:t,ref:l})}},{key:"renderPoint",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.props.link,i=n.getColor();return a.a.createElement("circle",{r:t?6:n.getPointRadius(),fill:t?"var(--background)":i,stroke:t?i:"none",strokeWidth:3,cx:e.x,cy:e.y})}},{key:"renderBifurcationSourcePoint",value:function(){var e=this.props.link,t=e.getBifurcationSource();if(!t)return null;var n=e.getFirstPoint().getPosition(),i=t.getLastPoint().getPosition();return P(n,i)?null:this.renderPoint(n)}},{key:"renderBifurcationTargetPoint",value:function(){var e=this.props.link,t=e.getBifurcationTarget();if(!t)return null;var n=e.getLastPoint().getPosition(),i=t.getLastPoint().getPosition();return P(n,i)?null:this.renderPoint(n)}},{key:"renderLooseLinkPoint",value:function(){var e=this.props.link;if(e.getTargetPort())return null;if(e.getBifurcationTarget())return null;var t=e.getBifurcations(),n=e.getLastPoint().getPosition();return t.some((function(e){return P(e.getFirstPosition(),n)||P(e.getLastPosition(),n)}))?null:this.renderPoint(n,!0)}},{key:"render",value:function(){var e=this,t=this.props.link;return this.refPaths=[],a.a.createElement(a.a.Fragment,null,a.a.createElement("g",{"data-default-link-test":t.getOptions().testName},this.generatePathPoints().map((function(t,n){return e.renderSegment(e.generateLinePath(t),n)}))),this.renderBifurcationSourcePoint(),this.renderBifurcationTargetPoint(),this.renderLooseLinkPoint())}}]),n}(i.Component);function ce(){var e=Object(Q.a)(["\n  pointer-events: all;\n  stroke-linecap: round;\n"]);return ce=function(){return e},e}var le=$.a.path(ce()),ue=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.call(this,"link")}return Object(p.a)(n,[{key:"generateModel",value:function(){return new D}},{key:"generateReactWidget",value:function(e){return a.a.createElement(oe,{diagramEngine:this.engine,link:e.model,factory:this})}},{key:"generateLinkSegment",value:function(e,t,n){return a.a.createElement(a.a.Fragment,null,a.a.createElement(le,{stroke:e.getColor(),strokeWidth:e.getLineWidth(),d:n}),a.a.createElement(le,{stroke:"none",strokeWidth:20,d:n}))}}]),n}(x.DefaultLinkFactory),se=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.call(this,"Port")}return Object(p.a)(n,[{key:"generateModel",value:function(){return new R}}]),n}(q.AbstractModelFactory),de=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,{type:q.InputType.KEY_DOWN,fire:function(t){var n=t.event;if(e()&&!i.engine.getModel().isLocked()&&i.matchesInput(n)){n.preventDefault();var a=n.code;"KeyX"===a&&i.handleCut(),"KeyC"===a&&i.handleCopy(),"KeyV"===a&&i.handlePaste()}}})).matchesInput=function(e){var t=e.ctrlKey,n=e.code;return t&&("KeyX"===n||"KeyC"===n||"KeyV"===n)},i.getSelectedComponents=function(){return i.engine.getModel().getSelectedEntities().filter((function(e){return e instanceof Z})).filter((function(e){return!e.isLocked()}))},i.handleCut=function(){var e=i.getSelectedComponents(),t=e.map((function(e){return e.clone().serialize()}));i.engine.fireEvent({nodes:e,links:e.reduce((function(e,t){return[].concat(Object(v.a)(e),Object(v.a)(t.getAllLinks()))}),[])},"entitiesRemoved"),e.forEach((function(e){return e.remove()})),i.engine.repaintCanvas(),localStorage.setItem("clipboard",JSON.stringify(t))},i.handleCopy=function(){var e=i.getSelectedComponents().map((function(e){return e.clone().serialize()}));localStorage.setItem("clipboard",JSON.stringify(e))},i.handlePaste=function(){var e=i.engine.getModel(),t=JSON.parse(localStorage.getItem("clipboard"));if(t){e.clearSelection();var n=t.map((function(t){var n=e.getActiveNodeLayer().getChildModelFactoryBank(i.engine).getFactory(t.type).generateModel({initialConfig:t});return n.deserialize({engine:i.engine,data:t,registerModel:function(){}}),n}));n.forEach((function(t){e.addNode(t),t.setSelected(!0)})),localStorage.setItem("clipboard",JSON.stringify(n.map((function(e){return e.clone().serialize()})))),i.engine.fireEvent({nodes:n},"componentsAdded"),i.engine.repaintCanvas()}},i}return n}(q.Action),fe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,{type:q.InputType.KEY_DOWN,fire:function(t){var n=t.event;e()&&(i.engine.getModel().isLocked()||i.matchesInput(n)&&(n.preventDefault(),i.handleAction()))}})).matchesInput=function(e){return"Delete"===e.code},i.handleAction=function(){var e=i.engine.getModel().getSelectedEntities().filter((function(e){return!e.isLocked()}));i.fireEvent(e),e.forEach((function(e){return e.remove()})),i.engine.repaintCanvas()},i.fireEvent=function(e){var t=e.filter((function(e){return e instanceof Z})),n=e.filter((function(e){return e instanceof D})),a=t.reduce((function(e,t){return[].concat(Object(v.a)(e),Object(v.a)(t.getAllLinks()))}),[]);i.engine.fireEvent({nodes:t,links:[].concat(Object(v.a)(a),Object(v.a)(n))},"entitiesRemoved")},i}return n}(q.Action),pe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,{type:q.InputType.KEY_DOWN,fire:function(t){var n=t.event;e()&&(i.engine.getModel().isLocked()||i.matchesInput(n)&&(n.preventDefault(),i.handleAction()))}})).matchesInput=function(e){return e.ctrlKey&&"KeyD"===e.code},i.handleAction=function(){var e=i.engine.getModel(),t=e.getSelectedEntities().filter((function(e){return e instanceof Z})).filter((function(e){return!e.isLocked()})).map((function(e){return e.clone()}));e.clearSelection(),t.forEach((function(t){e.addNode(t),t.setSelected(!0)})),i.engine.fireEvent({nodes:t},"componentsAdded"),i.engine.repaintCanvas()},i}return n}(q.Action),me=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,{type:q.InputType.KEY_DOWN,fire:function(t){var n=t.event;if(e()&&!i.engine.getModel().isLocked()&&i.matchesInput(n)){n.preventDefault();var a=n.ctrlKey,r=n.shiftKey,o=n.code;a&&!r&&"KeyZ"===o?i.handleUndo():i.handleRedo()}}})).matchesInput=function(e){var t=e.ctrlKey,n=e.shiftKey,i=e.code;return t&&("KeyZ"===i||"KeyY"===i)||t&&n&&"KeyZ"===i},i.handleUndo=function(){i.engine.commands.undo(),i.engine.repaintCanvas()},i.handleRedo=function(){i.engine.commands.redo(),i.engine.repaintCanvas()},i}return n}(q.Action),ge=[15,25,50,75,100,150,200,300],he=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(f.a)(this,n),e=t.call(this,{type:q.InputType.MOUSE_WHEEL,fire:function(t){var n=t.event;n.stopPropagation();var i=e.engine.getModel();i.getLayers().forEach((function(e){return e.allowRepaint(!1)}));var a,r=Math.sign(n.deltaY)>0?"in":"out",o=ge.indexOf(ge.includes(i.getZoomLevel())?i.getZoomLevel():100);a="in"===r?Math.min(o+1,ge.length-1):Math.max(o-1,0);var c=i.getZoomLevel()/100;i.setZoomLevel(ge[a]);var l=i.getZoomLevel()/100,u=e.engine.getCanvas().getBoundingClientRect(),s=u.width,d=u.height,f=s*l-s*c,p=d*l-d*c,m=n.clientX-u.left,g=n.clientY-u.top,h=(m-i.getOffsetX())/c/s,v=(g-i.getOffsetY())/c/d;i.setOffset(i.getOffsetX()-f*h,i.getOffsetY()-p*v),e.engine.repaintCanvas(),i.getLayers().forEach((function(e){return e.allowRepaint(!0)}))}})}return n}(q.Action),ve=function(e){var t=e.engine,n=e.editComponentConfiguration,i=function(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=[].concat(Object(v.a)(Object.values(t.getModel().getActiveNodeLayer().getModels())),Object(v.a)(n)),a=e.getSourcePort();if(a){var r=i.find((function(t){return t.getID()===e.getSourcePort().getParent().getID()}));a=r.getPort(a.getName()),e.setSourcePort(a),a.addLink(e)}var o=e.getTargetPort();if(o){var c=i.find((function(t){return t.getID()===e.getTargetPort().getParent().getID()}));o=c.getPort(o.getName()),e.setTargetPort(o),o.addLink(e)}return e.getBifurcationSource()&&e.getBifurcationSource().addBifurcation(e),e.getBifurcationTarget()&&e.getBifurcationTarget().addBifurcation(e),e};return{componentsAdded:function(e){var n=e.nodes;t.commands.add({execute:function(){n.forEach((function(e){return t.getModel().addNode(e)}))},undo:function(){n.forEach((function(e){return e.remove()}))}})},componentEdited:function(e){var a=e.node,r=e.configurations,o=e.links;t.commands.add({execute:function(){n(a,r.after)},undo:function(){n(a,r.before),o.before.forEach((function(e){return t.getModel().addLink(i(e))}))}})},linkAdded:function(e){var n=e.link;t.commands.add({execute:function(){t.getModel().addLink(i(n))},undo:function(){n.remove()}})},linkChanged:function(e){var n=e.before,i=e.after,a=function(e,n){var i=t.getModel().getLink(e.id);if(i.setPoints(e.points.map((function(e){var t=new k.PointModel({link:i});return t.setPosition(e),t}))),e.bifurcationTarget){var a=t.getModel().getLink(e.bifurcationTarget);i.setBifurcationTarget(a),a.addBifurcation(i)}else if(n.bifurcationTarget){var r=t.getModel().getLink(n.bifurcationTarget);i.setBifurcationTarget(null),r.removeBifurcation(i)}};t.commands.add({execute:function(){a(i,n)},undo:function(){a(n,i)}})},entitiesRemoved:function(e){var n=e.nodes,a=e.links;t.commands.add({execute:function(){n.forEach((function(e){return e.remove()})),a.forEach((function(e){return e.remove()}))},undo:function(){a.map((function(e){return i(e,n)})).sort((function(e,t){return e.getBifurcationSource()===t||e.getBifurcationTarget()===t?1:t.getBifurcationSource()===e||t.getBifurcationTarget()===e?-1:0})).forEach((function(e){return t.getModel().addLink(e)})),n.forEach((function(e){return t.getModel().addNode(e)}))}})},entitiesMoved:function(e){var n=e.nodes,i=e.links,a=function(e){n[e].forEach((function(e){var n=e.id,i=e.position;t.getModel().getNode(n).setPosition(i.x,i.y)})),i[e].forEach((function(e){var n=e.id,i=e.points,a=t.getModel().getLink(n);a.setPoints(i.map((function(e){var t=new k.PointModel({link:a});return t.setPosition(e),t})))}))};t.commands.add({execute:function(){a("after")},undo:function(){a("before")}})}}},be=function(){function e(t,n){Object(f.a)(this,e),this.execute=t,this.undo=n}return Object(p.a)(e,[{key:"execute",value:function(e){this.execute(e)}},{key:"undo",value:function(e){this.undo(e)}}]),e}(),ye=function(){function e(){Object(f.a)(this,e),this.clear()}return Object(p.a)(e,[{key:"clear",value:function(){this.stack=[],this.index=0}},{key:"add",value:function(e){var t=e.execute,n=e.undo,i=new be(t,n);this.stack.length=this.index,this.stack.push(i),this.index+=1}},{key:"undo",value:function(){this.index>0&&(this.index-=1,this.stack[this.index].undo())}},{key:"redo",value:function(){this.index<this.stack.length&&(this.stack[this.index].execute(),this.index+=1)}}]),e}(),Ee=n(22),ke=function(e,t,n,i){var a=function(e,t){var n=t.getZoomLevel()/100,i=t.getOffsetX()/n,a=t.getOffsetY()/n;return new E.Point(e.x-i,e.y-a)}(i,t),r=t.getZoomLevel()/100,o=n.x/r,c=n.y/r,l=a.x+(o-i.x)+e.virtualDisplacementX,u=a.y+(c-i.y)+e.virtualDisplacementY;return j(new E.Point(l,u),t.options.gridSize)};function Oe(e,t){var n=t.getFirstPosition(),i=t.getLastPosition(),a=ke(e,this.engine.getModel(),{x:this.initialXRelative,y:this.initialYRelative},n);if(!this.hasStartedMoving&&P(n,i)&&(this.hasStartedMoving=!0),this.hasStartedMoving)if(t.hasMiddlePoint()){var r=t.getMiddlePosition();P(r,i)?t.removePoint(t.getMiddlePoint()):P(n,r)?(t.removePoint(t.getMiddlePoint()),this.moveDirection="horizontal"===this.moveDirection?"vertical":"horizontal"):"horizontal"===this.moveDirection?i.x!==a.x&&t.getMiddlePoint().setPosition(a.x,n.y):"vertical"===this.moveDirection&&i.y!==a.y&&t.getMiddlePoint().setPosition(n.x,a.y)}else i.x!==a.x?(this.moveDirection||(this.moveDirection="horizontal"),"vertical"===this.moveDirection&&t.addPoint(t.generatePoint(i.x,a.y),1)):i.y!==a.y&&(this.moveDirection||(this.moveDirection="vertical"),"horizontal"===this.moveDirection&&t.addPoint(t.generatePoint(a.x,i.y),1));t.hasMiddlePoint()||n.x===a.x||n.y===a.y||(P(n,i)||"horizontal"===this.moveDirection?t.addPoint(t.generatePoint(a.x,n.y),1):t.addPoint(t.generatePoint(n.x,a.y),1)),t.getLastPoint().setPosition(a.x,a.y),this.engine.repaintCanvas()}var xe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,{name:"bifurcate-link"})).fireEvent=function(){i.sourceEdited?i.engine.fireEvent({before:i.sourceBefore,after:i.getLinkPoints(i.source)},"linkChanged"):i.engine.fireEvent({link:i.bifurcation},"linkAdded")},i.registerAction(new q.Action({type:q.InputType.MOUSE_DOWN,fire:function(e){i.moveDirection=void 0,i.hasStartedMoving=!1,i.source=i.engine.getMouseElement(e.event),i.sourceBefore=i.getLinkPoints(i.source),i.sourceEdited=!1;var t=i.snapPointToSourceLink(i.engine.getRelativeMousePoint(e.event),i.source);i.source.isLocked()?i.eject():(i.bifurcation=i.engine.getLinkFactories().getFactory(i.source.getType()).generateModel(),i.bifurcation.setBits(i.source.getBits()),i.bifurcation?(i.bifurcation.setBifurcationSource(i.source),i.bifurcation.getFirstPoint().setPosition(t),i.bifurcation.getLastPoint().setPosition(t),i.bifurcation.setSelected(!0),i.engine.getModel().clearSelection(),i.source.setSelected(!1),i.source.addBifurcation(i.bifurcation),i.engine.getModel().addLink(i.bifurcation)):i.eject())}})),i.registerAction(new q.Action({type:q.InputType.MOUSE_UP,fire:function(t){if(i.isNearbySourcePosition())return i.cleanUp(),i.engine.getModel().clearSelection(),i.source.setSelected(!0),void i.engine.repaintCanvas();var n=i.engine.getMouseElement(t.event);if(n instanceof Ee.NodeModel)return i.cleanUp(),void i.engine.repaintCanvas();if(n instanceof Ee.PortModel&&n.isNewLinkAllowed())return i.source.getBits()!==n.getBits()?(i.cleanUp(),i.engine.repaintCanvas(),void e(B(i.source,n))):(i.bifurcation.setTargetPort(n),n.reportPosition(),i.adjustBifurcationOverlayingSource(i.bifurcation),i.engine.repaintCanvas(),void i.fireEvent());var a=T(i.bifurcation,i.engine);if(a){if(a.getBits()!==i.bifurcation.getBits())return i.cleanUp(),i.engine.repaintCanvas(),void e(B(i.bifurcation,a));i.bifurcation.setBifurcationTarget(a),a.addBifurcation(i.bifurcation),a.setSelected(!0)}i.mergeWithBifurcation(i.bifurcation.getBifurcationSource()),i.adjustBifurcationOverlayingSource(i.bifurcation),i.fireEvent()}})),i}return Object(p.a)(n,[{key:"getLinkPoints",value:function(e){return{id:e.getID(),points:e.getPoints().map((function(e){return e.getPosition()})),bifurcationTarget:e.getBifurcationTarget()?e.getBifurcationTarget().getID():null}}},{key:"cleanUp",value:function(){this.source.removeBifurcation(this.bifurcation),this.bifurcation.remove()}},{key:"snapPointToSourceLink",value:function(e,t){var n=this.engine.getModel().getOptions().gridSize,i=t.getPoints(),a=this.getClosestCornerToPosition(i,e);if(a.distance<n-1)return new E.Point(a.position.x,a.position.y);var r=this.getClosestPathToPosition(i,e),o=j(e,n);return new E.Point("x"===r.axis?r.position:o.x,"y"===r.axis?r.position:o.y)}},{key:"getClosestCornerToPosition",value:function(e,t){return e.map((function(e){return Object(c.a)({distance:Math.hypot(t.x-e.position.x,t.y-e.position.y)},e)})).reduce((function(e,t){return t.distance<e.distance?t:e}))}},{key:"getPathPoints",value:function(e){return e.map((function(t,n){return{from:e[n],to:e[n+1]}})).filter((function(e){return e.to}))}},{key:"getPathDirections",value:function(e){return this.getPathPoints(e).map((function(e){return w(e.from.position,e.to.position)?{axis:"x",position:e.from.position.x}:{axis:"y",position:e.from.position.y}}))}},{key:"getClosestPathToPosition",value:function(e,t){return this.getPathDirections(e).map((function(e){return Object(c.a)({distance:Math.abs(t[e.axis]-e.position)},e)})).reduce((function(e,t){return t.distance<e.distance?t:e}))}},{key:"isNearbySourcePosition",value:function(){return P(this.bifurcation.getFirstPosition(),this.bifurcation.getLastPosition())}},{key:"adjustBifurcationOverlayingSource",value:function(){var e=this.bifurcation.getBifurcationSource();if(P(this.bifurcation.getFirstPosition(),e.getLastPosition()))A(this.bifurcation.getSecondPosition(),e)&&this.bifurcation.removePoint(this.bifurcation.getFirstPoint());else{if(A(this.bifurcation.getFirstPosition(),e)&&A(this.bifurcation.getSecondPosition(),e)){if(!this.bifurcation.hasMiddlePoint())return this.bifurcation.remove(),void e.removeBifurcation(this.bifurcation);if(this.bifurcation.removePoint(this.bifurcation.getFirstPoint()),P(this.bifurcation.getFirstPosition(),e.getMiddlePosition()))return A(this.bifurcation.getLastPosition(),e)?(this.bifurcation.remove(),void e.removeBifurcation(this.bifurcation)):(this.bifurcation.getFirstPoint().setPosition(e.getLastPosition()),void this.mergeWithBifurcation(e))}e.hasMiddlePoint()&&C(this.bifurcation.getFirstPosition(),e.getMiddlePosition(),this.bifurcation.getSecondPosition())&&this.bifurcation.getFirstPoint().setPosition(e.getMiddlePosition())}}},{key:"mergeWithBifurcation",value:function(e){var t={first:e.getFirstPosition(),middle:e.getMiddlePosition(),last:e.getLastPosition(),secondLast:e.getSecondLastPosition()};e.getBifurcations().forEach((function(t){A(e.getLastPosition(),t)&&t.getFirstPoint().setPosition(e.getLastPosition())}));var n=e.getBifurcations().filter((function(n){return!!P(n.getFirstPosition(),t.last)&&(!e.hasMiddlePoint()&&!n.hasMiddlePoint()||(e.hasMiddlePoint()&&n.hasMiddlePoint()?!!P(t.middle,n.getMiddlePosition()):!!C(t.last,t.secondLast,n.getSecondPosition())))}))[0];if(n){var i=n.getSecondLastPosition(),a=n.getLastPosition();e.hasMiddlePoint()||e.addPoint(e.generatePoint(i.x,i.y),1),e.getLastPoint().setPosition(a.x,a.y),e.isStraight()&&e.hasMiddlePoint()&&e.removePoint(e.getMiddlePoint()),e.removeBifurcation(n);var r=n.getBifurcationTarget();r&&(e.setBifurcationTarget(r),r.addBifurcation(e)),this.sourceEdited=!0,n.remove(),P(e.getFirstPosition(),e.getLastPosition())?e.remove():e.setSelected(!0),this.adjustBifurcationPoints(e)}}},{key:"adjustBifurcationPoints",value:function(e){var t=this.engine.getModel().getOptions().gridSize;e.getBifurcations().filter((function(t){return!A(t.getFirstPosition(),e)})).forEach((function(n){var i=j(L(n.getFirstPosition(),e),t);n.getFirstPoint().setPosition(i.x,i.y),C(n.getFirstPosition(),n.getLastPosition())||(n.hasMiddlePoint()&&n.removePoint(n.getMiddlePoint()),w(e.getFirstPosition(),e.getSecondPosition())?n.addPoint(n.generatePoint(n.getLastPosition().x,n.getFirstPosition().y),1):n.addPoint(n.generatePoint(n.getFirstPosition().x,n.getLastPosition().y),1))}))}},{key:"fireMouseMoved",value:function(e){Oe.call(this,e,this.bifurcation)}}]),n}(q.AbstractDisplacementState),je=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.call(this,{name:"drag-canvas"})}return Object(p.a)(n,[{key:"activated",value:function(){var e=Object(s.a)(u.a.mark((function e(t){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return Object(b.a)(Object(y.a)(n.prototype),"activated",this).call(this,t),this.engine.getModel().clearSelection(),e.next=4,this.engine.repaintCanvas(!0);case 4:this.engine.getModel().getLayers().forEach((function(e){return e.allowRepaint(!1)})),this.initialCanvasX=this.engine.getModel().getOffsetX(),this.initialCanvasY=this.engine.getModel().getOffsetY();case 7:case"end":return e.stop()}}),e,this)})));return function(t){return e.apply(this,arguments)}}()},{key:"deactivated",value:function(e){Object(b.a)(Object(y.a)(n.prototype),"deactivated",this).call(this,e),this.engine.getModel().getLayers().forEach((function(e){return e.allowRepaint(!0)}))}},{key:"fireMouseMoved",value:function(e){1===e.event.nativeEvent.which&&(this.engine.getModel().setOffset(this.initialCanvasX+e.displacementX,this.initialCanvasY+e.displacementY),this.engine.repaintCanvas())}}]),n}(q.AbstractDisplacementState),Pe=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,{name:"drag-new-link"})).fireEvent=function(){i.engine.fireEvent({link:i.link},"linkAdded")},i.registerAction(new q.Action({type:q.InputType.MOUSE_DOWN,fire:function(e){i.moveDirection=void 0,i.hasStartedMoving=!1,i.port=i.engine.getMouseElement(e.event),i.port instanceof Ee.PortModel&&!i.port.isLocked()?(i.link=i.port.createLinkModel(),i.link?(i.link.setSelected(!0),i.link.setSourcePort(i.port),i.engine.getModel().clearSelection(),i.engine.getModel().addLink(i.link),i.port.reportPosition()):i.eject()):i.eject()}})),i.registerAction(new q.Action({type:q.InputType.MOUSE_UP,fire:function(t){var n=i.engine.getMouseElement(t.event);if((n instanceof Ee.NodeModel||i.isNearbySourcePort(t.event))&&(i.link.remove(),i.engine.repaintCanvas()),n instanceof Ee.PortModel&&i.port.canLinkToPort(n))return i.port.getBits()!==n.getBits()?(i.link.remove(),i.engine.repaintCanvas(),void e(B(i.port,n))):(i.link.setTargetPort(n),n.reportPosition(),i.engine.repaintCanvas(),void i.fireEvent());var a=T(i.link,i.engine);if(a){if(a.getBits()!==i.link.getBits())return i.link.remove(),i.engine.repaintCanvas(),void e(B(i.link,a));var r=i.engine.getFactoryForLink(a).generateModel();r.setPoints(i.link.getPoints().reverse()),r.setTargetPort(i.link.getSourcePort()),r.setBifurcationSource(a),r.setBits(a.getBits()),a.addBifurcation(r),a.setSelected(!0),i.link.remove(),i.engine.getModel().addLink(r),i.link=r}i.fireEvent()}})),i}return Object(p.a)(n,[{key:"isNearbySourcePort",value:function(e){var t,n,i,a=this.engine.getRelativeMousePoint(e),r=this.link.getSourcePort(),o=r.width,c=r.getPosition();return t=a,n=c,i=o,Math.abs(t.x-n.x)<=i&&Math.abs(t.y-n.y)<=i}},{key:"fireMouseMoved",value:function(e){Oe.call(this,e,this.link)}}]),n}(q.AbstractDisplacementState),we=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.call(this,{name:"move-items"})).getNodesPositions=function(){return e.engine.getModel().getSelectedEntities().filter((function(e){return e instanceof Z})).map((function(e){return{id:e.getID(),position:e.getPosition()}}))},e.getLinksPoints=function(){return e.engine.getModel().getSelectedEntities().filter((function(e){return e instanceof Z})).map((function(e){return e.getAllLinks()})).flat().map((function(e){return{id:e.getID(),points:e.getPoints().map((function(e){return e.getPosition()}))}}))},e.adjustLinkPoints=function(t){var n=t.getFirstPosition(),i=t.getLastPosition();if(t.hasMiddlePoint()||n.x===i.x||n.y===i.y){if(t.hasMiddlePoint()){"horizontal"===e.linkDirections[t.getID()]?t.getMiddlePoint().setPosition(i.x,n.y):t.getMiddlePoint().setPosition(n.x,i.y);var a=t.getMiddlePosition();(P(n,a)||P(a,i))&&t.removePoint(t.getMiddlePoint())}}else t.addPoint(t.generatePoint(n.x,i.y),1);e.adjustLinkBifurcations(t)},e.registerAction(new q.Action({type:q.InputType.MOUSE_DOWN,fire:function(t){e.engine.getModel().isLocked()?e.eject():(e.lastDisplacement=new E.Point(0,0),e.element=e.engine.getActionEventBus().getModelForEvent(t),e.element?(e.element.isSelected()||e.engine.getModel().clearSelection(),e.linkDirections=e.getLinkDirections(e.element),e.element.setSelected(!0),e.engine.repaintCanvas(),e.nodesBefore=e.getNodesPositions(),e.linksBefore=e.getLinksPoints()):e.eject())}})),e.registerAction(new q.Action({type:q.InputType.MOUSE_UP,fire:function(){0===e.lastDisplacement.x&&0===e.lastDisplacement.y||e.fireEvent()}})),e}return Object(p.a)(n,[{key:"fireEvent",value:function(){this.engine.fireEvent({nodes:{before:this.nodesBefore,after:this.getNodesPositions()},links:{before:this.linksBefore,after:this.getLinksPoints()}},"entitiesMoved")}},{key:"activated",value:function(e){Object(b.a)(Object(y.a)(n.prototype),"activated",this).call(this,e),this.initialPositions={}}},{key:"getLinksFromNode",value:function(e){var t=this;return e instanceof Ee.NodeModel?Object.values(e.getPorts()).map((function(e){return Object.entries(e.getLinks())})).filter((function(e){return e.length>0})).flat().map((function(e){var n=Object(d.a)(e,2),i=n[0],a=n[1];return[[i,a]].concat(Object(v.a)(t.getBifurcatedLinks(a)))})).flat():[]}},{key:"getBifurcatedLinks",value:function(e){var t=this;return e.getBifurcations().map((function(e){return[[e.getID(),e]].concat(Object(v.a)(t.getBifurcatedLinks(e)))})).flat()}},{key:"getLinkDirections",value:function(e){var t=this;return this.getLinksFromNode(e).reduce((function(e,n){var i=Object(d.a)(n,2),a=i[0],r=i[1];return Object(c.a)(Object(c.a)({},e),{},Object(I.a)({},a,t.getLinkDirection(r)))}),{})}},{key:"getLinkDirection",value:function(e){if(!e.hasMiddlePoint())return null;var t=e.getFirstPosition(),n=e.getMiddlePosition();return w(t,n)?"vertical":S(t,n)?"horizontal":null}},{key:"fireMouseMoved",value:function(e){var t=this;if(1===e.event.nativeEvent.which){var n=j(new E.Point(e.virtualDisplacementX,e.virtualDisplacementY),this.engine.getModel().getOptions().gridSize);P(n,this.lastDisplacement)||(this.lastDisplacement=n,this.engine.getModel().getSelectedEntities().forEach((function(n){n instanceof q.BasePositionModel&&(t.moveEntity(n,e),n instanceof Ee.NodeModel&&t.adjustNodeLinks(n))})),this.engine.repaintCanvas())}}},{key:"moveEntity",value:function(e,t){if(!e.isLocked()){this.initialPositions[e.getID()]||(this.initialPositions[e.getID()]={point:e.getPosition(),item:e});var n=this.initialPositions[e.getID()].point,i=this.engine.getModel();e.setPosition(i.getGridPosition(n.x+t.virtualDisplacementX),i.getGridPosition(n.y+t.virtualDisplacementY))}}},{key:"adjustNodeLinks",value:function(e){var t=this;Object.values(e.getPorts()).forEach((function(e){return Object.values(e.getLinks()).forEach(t.adjustLinkPoints)}))}},{key:"adjustLinkBifurcations",value:function(e){var t=this;e.getBifurcations().forEach((function(e){t.adjustFirstAndLastPoints(e),t.adjustLinkPoints(e)}))}},{key:"adjustFirstAndLastPoints",value:function(e){var t=this.engine.getModel().getOptions().gridSize,n=e.getFirstPoint(),i=j(L(n.getPosition(),e.getBifurcationSource()),t);if(n.setPosition(i.x,i.y),e.getBifurcationTarget()){var a=e.getLastPoint(),r=j(L(a.getPosition(),e.getBifurcationTarget()),t);a.setPosition(r.x,r.y)}}}]),n}(q.AbstractDisplacementState),Se=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.call(this,{name:"selection-box"})}return Object(p.a)(n,[{key:"activated",value:function(e){Object(b.a)(Object(y.a)(n.prototype),"activated",this).call(this,e),this.layer=new q.SelectionLayerModel,this.engine.getModel().addLayer(this.layer)}},{key:"deactivated",value:function(e){Object(b.a)(Object(y.a)(n.prototype),"deactivated",this).call(this,e),this.layer.remove(),this.engine.repaintCanvas()}},{key:"getBoxDimensions",value:function(e){var t=this.engine.getRelativePoint(e.event.clientX,e.event.clientY);return{left:t.x>this.initialXRelative?this.initialXRelative:t.x,top:t.y>this.initialYRelative?this.initialYRelative:t.y,width:Math.abs(t.x-this.initialXRelative),height:Math.abs(t.y-this.initialYRelative),right:t.x<this.initialXRelative?this.initialXRelative:t.x,bottom:t.y<this.initialYRelative?this.initialYRelative:t.y}}},{key:"fireMouseMoved",value:function(e){var t=this;this.layer.setBox(this.getBoxDimensions(e));var n=this.engine.getRelativeMousePoint({clientX:this.initialX,clientY:this.initialY});e.virtualDisplacementX<0&&(n.x-=Math.abs(e.virtualDisplacementX)),e.virtualDisplacementY<0&&(n.y-=Math.abs(e.virtualDisplacementY));var i=new E.Rectangle(n,Math.abs(e.virtualDisplacementX),Math.abs(e.virtualDisplacementY));this.engine.getModel().isLocked()||this.engine.getModel().getSelectionEntities().forEach((function(e){if(e.getBoundingBox){if(!t.allowSelection(e))return;var n=e.getBoundingBox();i.containsPoint(n.getTopLeft())&&i.containsPoint(n.getBottomRight())?e.setSelected(!0):e.setSelected(!1)}})),this.engine.repaintCanvas()}},{key:"allowSelection",value:function(e){return!(e instanceof Ee.LinkModel)&&!(e instanceof Ee.PointModel)}}]),n}(q.AbstractDisplacementState),Ce=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){var e;return Object(f.a)(this,n),(e=t.call(this,{name:"selecting"})).keys=["shift"],e.registerAction(new q.Action({type:q.InputType.MOUSE_DOWN,fire:function(t){var n=e.engine.getActionEventBus().getModelForEvent(t);n?(n.setSelected(!0),e.engine.repaintCanvas()):e.transitionWithEvent(new Se,t)}})),e}return n}(q.State),Le=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,{name:"diagram-states"})).childStates=[new Ce],i.dragCanvas=new je,i.dragNewLink=new Pe(e),i.bifurcateLink=new xe(e),i.dragItems=new we,i.registerAction(new q.Action({type:q.InputType.MOUSE_DOWN,fire:function(e){var t=i.engine.getActionEventBus().getModelForEvent(e);t?t instanceof Ee.PortModel?i.transitionWithEvent(i.dragNewLink,e):t instanceof Ee.LinkModel?i.transitionWithEvent(i.bifurcateLink,e):i.transitionWithEvent(i.dragItems,e):i.transitionWithEvent(i.dragCanvas,e)}})),i}return n}(q.State),Me=function e(t,n,i){var a=this;Object(f.a)(this,e),this.getEngine=function(){return a.engine},this.getModel=function(){return a.engine.getModel()},this.initializeEngine=function(){a.engine=O()({registerDefaultDeleteItemsAction:!1,registerDefaultZoomCanvasAction:!1}),a.engine.commands=new ye,a.engine.registerListener(ve(a)),a.engine.getStateMachine().pushState(new Le(a.showSnackbar)),[pe,de,fe,me,he].forEach((function(e){return a.engine.getActionEventBus().registerAction(new e(a.areShortcutsAllowed))})),a.engine.getPortFactories().registerFactory(new se),a.engine.getLinkFactories().registerFactory(new ue),a.registerComponents()},this.initializeModel=function(){a.model=new k.DiagramModel,a.model.setGridSize(15),a.model.setLocked(!1),a.model.registerListener({eventDidFire:function(e){var t=e.function;"offsetUpdated"===t&&a.adjustGridOffset(e),"zoomUpdated"===t&&a.adjustGridZoom(e)}}),a.realignGrid(),a.engine.setModel(a.model)},this.registerComponents=function(){a.components.forEach((function(e){a.engine.getNodeFactories().registerFactory(e)}))},this.serialize=function(){return a.model.serialize()},this.load=function(e){a.engine.commands.clear(),a.model.deserializeModel(e,a.engine),a.realignGrid(),a.engine.repaintCanvas()},this.setLocked=function(e){a.model.setLocked(e),a.locked=e},this.isLocked=function(){return a.locked},this.repaint=function(){return a.engine.repaintCanvas()},this.realignGrid=function(){a.adjustGridOffset({offsetX:a.model.getOffsetX(),offsetY:a.model.getOffsetY()}),a.adjustGridZoom({zoom:a.model.getZoomLevel()})},this.adjustGridOffset=function(e){var t=e.offsetX,n=e.offsetY;document.body.style.setProperty("--offset-x","".concat(t,"px")),document.body.style.setProperty("--offset-y","".concat(n,"px"))},this.adjustGridZoom=function(e){var t=e.zoom,n=a.model.getOptions().gridSize;document.body.style.setProperty("--grid-size","".concat(n*t/100,"px"))},this.handleComponentDrop=function(e,t){var n=a.components.find((function(e){return e.type===t.type})).Model,i=e?function(){var t=a.engine.getRelativeMousePoint(e),n=t.x,i=t.y;return new E.Point(15*Math.round(n/15),15*Math.round(i/15))}():new E.Point(0,0),r=new n(t.configurations,t.type);a.model.addNode(r),r.setPosition(i),a.engine.fireEvent({nodes:[r]},"componentsAdded"),a.engine.repaintCanvas()},this.handleComponentEdit=function(e,t){var n=e.configurations,i=e.getAllLinks();a.editComponentConfiguration(e,t),a.engine.fireEvent({node:e,configurations:{before:n,after:e.configurations},links:{before:i,after:e.getAllLinks()}},"componentEdited"),a.engine.repaintCanvas()},this.editComponentConfiguration=function(e,t){var n=e.getPorts();e.configurations=t,e.ports={},e.initialize(t);var i=Object.values(e.getPorts()).some((function(e){return!n[e.getName()]})),a=Object.values(n).some((function(t){return!e.getPort(t.getName())}));i||a?Object.values(n).forEach((function(e){return Object.values(e.getLinks()).forEach((function(e){return e.remove()}))})):Object.values(n).forEach((function(t){var n=e.getPort(t.getName());if(t.getBits()===n.getBits()){var i=Object.values(t.getLinks())[0];i&&(n.addLink(i),t===i.getSourcePort()&&i.setSourcePort(n),t===i.getTargetPort()&&i.setTargetPort(n),t.remove())}else t.getMainLink()&&t.getMainLink().remove()}))},this.clearSelection=function(){return a.getEngine().getModel().clearSelection()},this.getSelectedNodes=function(){return a.engine.getModel().getSelectedEntities().filter((function(e){return e instanceof Z}))},this.fireAction=function(e){return a.engine.getActionEventBus().fireAction({event:Object(c.a)(Object(c.a)({},e),{},{key:"",preventDefault:function(){},stopPropagation:function(){}})})},this.duplicateSelected=function(){return a.fireAction({type:"keydown",ctrlKey:!0,code:"KeyD"})},this.cutSelected=function(){return a.fireAction({type:"keydown",ctrlKey:!0,code:"KeyX"})},this.copySelected=function(){return a.fireAction({type:"keydown",ctrlKey:!0,code:"KeyC"})},this.pasteSelected=function(){return a.fireAction({type:"keydown",ctrlKey:!0,code:"KeyV"})},this.deleteSelected=function(){return a.fireAction({type:"keydown",code:"Delete"})},this.undo=function(){return a.fireAction({type:"keydown",ctrlKey:!0,code:"KeyZ"})},this.redo=function(){return a.fireAction({type:"keydown",ctrlKey:!0,shiftKey:!0,code:"KeyZ"})},this.zoomIn=function(e){var t=e.event;return a.fireAction({clientX:t.clientX,clientY:t.clientY,type:"wheel",deltaY:1})},this.zoomOut=function(e){var t=e.event;return a.fireAction({clientX:t.clientX,clientY:t.clientY,type:"wheel",deltaY:-1})},this.synchronizeLink=function(e,t){return a.getEngine().getModel().getLink(e).setValue(t)},this.synchronizeComponent=function(e,t){var n=a.getEngine().getModel().getNode(e);Object.entries(t.output).forEach((function(e){var t=Object(d.a)(e,2),i=t[0],a=t[1];return n.getPort(i).setValue(a)})),Object.entries(t.properties).forEach((function(e){var t=Object(d.a)(e,2),i=t[0],a=t[1];n[i]=a}))},this.clearAllValues=function(){a.clearLinkValues(),a.clearPortValues()},this.clearLinkValues=function(){return a.getEngine().getModel().getLinks().forEach((function(e){return e.setValue(null)}))},this.clearPortValues=function(){return a.getEngine().getModel().getNodes().forEach((function(e){return Object.values(e.getPorts()).forEach((function(e){return e.setValue(null)}))}))},this.components=t,this.areShortcutsAllowed=n,this.showSnackbar=i,this.locked=!1,this.initializeEngine(),this.initializeModel()};function Ae(){var e=Object(Q.a)(["\n  width: 10px;\n  height: 10px;\n  border: var(--port-width) solid\n    ",";\n  border-radius: 100%;\n  background: ",";\n\n  &:hover {\n    background: var(--port-hover);\n  }\n"]);return Ae=function(){return e},e}var Te=$.a.div(Ae(),(function(e){return e.link?"var(--port-connected-border)":"var(--port-unconnected-border)"}),(function(e){return e.port.getColor()})),Be=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"report",value:function(){this.props.port&&Object(b.a)(Object(y.a)(n.prototype),"report",this).call(this)}},{key:"componentDidUpdate",value:function(){this.props.port&&Object(b.a)(Object(y.a)(n.prototype),"componentDidUpdate",this).call(this)}},{key:"render",value:function(){var e=this.props,t=e.name,n=e.model,i=e.port,r=e.className,o=void 0===r?"":r;return i?a.a.createElement(Te,{className:"port ".concat(o),"data-name":t,"data-nodeid":n.getID(),port:i,link:i.getMainLink()}):null}}]),n}(k.PortWidget);function Ie(){var e=Object(Q.a)(["\n  position: absolute;\n  left: ","px;\n  height: ","px;\n  width: 2px;\n  background: ",";\n\n  ","\n"]);return Ie=function(){return e},e}var Ne=function(e){if(2===e)return[1,5];if(3===e)return[1,3,5];if(4===e)return[1,2,4,5];var t=e%2===0,n=e-(t?0:1),i=0,a=5;e>5&&(i=Math.floor((5-n)/2),a=n+1);var r=Object(v.a)(Array(a).keys()).map((function(e){return e+i+1}));return t&&r.splice(e/2,1),r},ze=$.a.div(Ie(),(function(e){return e.offsetX}),(function(e){return e.size}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"}),(function(e){return"".concat(e.place,": 88px;")})),De=function(e){var t=e.selected,n=e.portPositions,i=e.offsetX,r=void 0===i?1:i,o=n[n.length-1];if(o<=5)return null;var c=15*(o-5);return a.a.createElement(a.a.Fragment,null,a.a.createElement(ze,{selected:t,size:c,place:"top",offsetX:r}),a.a.createElement(ze,{selected:t,size:c,place:"bottom",offsetX:r}))};function Re(){var e=Object(Q.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"]);return Re=function(){return e},e}function Fe(){var e=Object(Q.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 90px;\n\n  transition: 100ms linear;\n  svg {\n    fill: ",";\n    stroke: ",";\n  }\n"]);return Fe=function(){return e},e}var He=$.a.div(Fe(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),_e=Object($.a)(Be)(Re(),(function(e){return"out"===e.name?"":"top: ".concat(15*e.position-5,"px;")}),(function(e){return"out"===e.name?"right: -5px":"left: -5px"})),We=function(e){var t=e.size,n=void 0===t?90:t;return a.a.createElement("svg",{height:n,width:n,viewBox:"0 0 23.812499 23.812501",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},a.a.createElement("g",null,a.a.createElement("path",{transform:"scale(0.26458333)",d:"M 2 2 L 2 45 A 42.999999 42.999999 0 0 0 2 45.271484 L 2 88 L 45 88 A 42.999999 42.999999 0 0 0 88 45 A 42.999999 42.999999 0 0 0 45 2 L 44.728516 2 L 2 2 z "})))},Ue=function(e){var t=e.model,n=e.engine,i=Object.values(t.getInputPorts()),r=Ne(i.length);return a.a.createElement(He,{selected:t.isSelected()},a.a.createElement(De,{selected:t.isSelected(),portPositions:r}),i.map((function(e,i){return a.a.createElement(_e,{key:e.getName(),name:e.getName(),model:t,port:e,engine:n,position:r[i]})})),a.a.createElement(_e,{name:"out",model:t,port:t.getPort("out"),engine:n}),a.a.createElement(We,null))},Ve=function(){return a.a.createElement(We,{size:30})},Ye=new J({type:"And",name:"And",description:'Logic "and" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:16,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){for(var t=Number(e.INPUT_PORTS_NUMBER),n=Number(e.DATA_BITS),i=0;i<t;i+=1)this.addInputPort("in".concat(i),n);this.addOutputPort("out",n)}},{key:"step",value:function(e){return{out:Object.values(e).reduce((function(e,t){return e&t}))}}}]),n}(Z),widget:Ue,icon:Ve});function Xe(){var e=Object(Q.a)(["\n  position: absolute;\n  ","\n"]);return Xe=function(){return e},e}function Ke(){var e=Object(Q.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  transition: 100ms linear;\n  svg {\n    fill: ",";\n    stroke: ",";\n  }\n"]);return Ke=function(){return e},e}var Ze=$.a.div(Ke(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Ge=Object($.a)(Be)(Xe(),(function(e){return"in"===e.name?"left: -5px;":"out"===e.name?"right: -5px;":""})),qe=function(e){var t=e.size,n=void 0===t?30:t;return a.a.createElement("svg",{height:n,width:n,viewBox:"0 0 45.0 45.0",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},a.a.createElement("g",null,a.a.createElement("path",{d:"M 1.0207771,1.6492624 V 43.357967 L 42.724327,22.649262 Z"})))},Je=function(e){var t=e.model,n=e.engine,i=t.options.selected;return a.a.createElement(Ze,{selected:i},a.a.createElement(Ge,{name:"in",model:t,port:t.getPort("in"),engine:n}),a.a.createElement(Ge,{name:"out",model:t,port:t.getPort("out"),engine:n}),a.a.createElement(qe,null))},Qe=function(){return a.a.createElement(qe,{size:30})},$e=new J({type:"Buffer",name:"Buffer",description:"Simple buffer",group:"Logic gates",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){var t=Number(e.DATA_BITS);this.addInputPort("in",t),this.addOutputPort("out",t)}},{key:"step",value:function(e){return{out:e.in}}}]),n}(Z),widget:Je,icon:Qe});function et(){var e=Object(Q.a)(["\n  position: absolute;\n  right: -7px;\n"]);return et=function(){return e},e}function tt(){var e=Object(Q.a)(["\n  position: absolute;\n  border-radius: 50%;\n  width: 18px;\n  height: 18px;\n  outline: none;\n\n  border: 2px solid rgba(0, 0, 0, 0.3);\n  background: linear-gradient(\n    225deg,\n    rgba(238, 0, 0, 1) 0%,\n    rgba(125, 20, 20, 1) 100%\n  );\n\n  :active {\n    border: 2px solid rgba(255, 255, 255, 0.5);\n    background: linear-gradient(\n      225deg,\n      rgba(125, 20, 20, 1) 0%,\n      rgba(238, 0, 0, 1) 100%\n    );\n  }\n"]);return tt=function(){return e},e}function nt(){var e=Object(Q.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n\n  transition: 100ms linear;\n"]);return nt=function(){return e},e}var it=$.a.div(nt(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),at=$.a.button(tt()),rt=Object($.a)(Be)(et()),ot=function(e){var t=e.model,n=e.engine,r=t.options.selected,o=Object(i.useRef)(),c=function(e){o.current&&!o.current.contains(e.target)&&t.onRelease()};return Object(i.useEffect)((function(){return document.addEventListener("mouseup",c),function(){return document.removeEventListener("mouseup",c)}})),a.a.createElement(it,{selected:r},a.a.createElement(rt,{name:"out",model:t,port:t.getPort("out"),engine:n}),a.a.createElement(at,{ref:o,onMouseDown:function(){return t.onClick()},onMouseUp:function(){return t.onRelease()}}))},ct=function(){return a.a.createElement(it,null,a.a.createElement(at,{as:"div"}))},lt=new J({type:"Button",name:"Button",description:"Simple button",group:"Input & output",configurations:[],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(){this.addOutputPort("out")}},{key:"onSimulationStart",value:function(){this.emit({out:0})}},{key:"onClick",value:function(){this.emit({out:1})}},{key:"onRelease",value:function(){this.emit({out:0})}}]),n}(Z),widget:ot,icon:ct});function ut(){var e=Object(Q.a)(["\n  width: 8px;\n  height: 8px;\n\n  background: black;\n  border-radius: 4px;\n"]);return ut=function(){return e},e}function st(){var e=Object(Q.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ",";\n  box-shadow: 0 0 ","px black;\n  border: 2px solid\n    ",";\n  border-radius: 15px;\n"]);return st=function(){return e},e}function dt(){var e=Object(Q.a)(["\n  position: absolute;\n  left: -7px;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return dt=function(){return e},e}var ft=Object($.a)(Be)(dt()),pt=$.a.div(st(),(function(e){return"rgba(62, 62, 62, ".concat(e.selected?.5:1,")")}),(function(e){return e.isActive?15:0}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),mt=$.a.div(ut()),gt=function(e){var t=e.selected,n=e.isActive,i=e.children;return a.a.createElement(pt,{selected:t,isActive:n,"data-testid":"body"},a.a.createElement(mt,null),i)},ht=function(e){var t=e.model,n=e.engine,i=t.options.selected;return a.a.createElement(gt,{selected:i,isActive:t.isActive()},a.a.createElement(ft,{name:"in",model:t,port:t.getPort("in"),engine:n}))},vt=function(){return a.a.createElement(gt,{color:"#00ff00"})},bt=new J({type:"Buzzer",name:"Buzzer",description:"Outputs sound at a give frequency",group:"Input & output",configurations:[{name:"FREQUENCY_HZ",type:"number",default:300,label:"Sound frequency (in Hertz)",min:0,max:2e4,validate:function(e){return e<this.min?"Minimum frequency is ".concat(this.min," Hz"):e>this.max?"Maximum frequency is ".concat(this.max," Hz"):null}},{name:"WAVEFORM",type:"select",default:"SINE",label:"Waveform",options:[{label:"Sine",value:"SINE"},{label:"Square",value:"SQUARE"},{label:"Sawtooth",value:"SAWTOOTH"},{label:"Triangle",value:"TRIANGLE"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){this.frequencyHz=Number(e.FREQUENCY_HZ),this.waveform=e.WAVEFORM,this.addInputPort("in")}},{key:"onSimulationStart",value:function(){this.audio=this.createAudio(this.frequencyHz,this.waveform)}},{key:"onSimulationPause",value:function(){this.audio.pause()}},{key:"step",value:function(e){e.in?this.audio.play():this.audio.pause()}},{key:"isActive",value:function(){return 0!==(this.getPort("in").getValue()||0)}}]),n}(Z),widget:ht,icon:vt});function yt(){var e=Object(Q.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 30px;\n  height: 30px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n\n  transition: 100ms linear;\n"]);return yt=function(){return e},e}function Et(){var e=Object(Q.a)(["\n  position: absolute;\n  right: -7px;\n"]);return Et=function(){return e},e}var kt=Object($.a)(Be)(Et()),Ot=$.a.div(yt(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),xt=function(e){var t=e.output,n=e.color,i=e.periodMs,r=e.animateTransition;return a.a.createElement("svg",{width:30,height:30,viewBox:"0 0 7.9374997 7.9375003",strokeWidth:"1"},a.a.createElement("path",{"data-testid":"decoration",stroke:n,strokeWidth:.75,fill:"none",style:{transform:0===t?"rotateX(180deg)":"none",transformOrigin:"center",transition:r?"calc(".concat(i,"ms / 2 * 0.4) ease-in-out"):"none"},d:"M 1.8683545,4.4337648 V 6.14192 H 4.0062447 V 1.79558 h 2.0629007 v 1.7578226"}))},jt=function(e){var t=e.model,n=e.engine,i=t.options.selected,r=t.periodMs,o=t.getPort("out");return a.a.createElement(Ot,{selected:i},a.a.createElement(kt,{name:"out",model:t,port:o,engine:n}),a.a.createElement(xt,{output:o.getValue(),color:o.getColor(),periodMs:r,animateTransition:r>=500}))},Pt=function(){return a.a.createElement(Ot,null,a.a.createElement(xt,{color:"var(--port-unconnected)"}))},wt=new J({type:"Clock",name:"Clock",description:"Generates a clock signal",group:"Input & output",configurations:[{name:"FREQUENCY_HZ",type:"number",default:1,label:"Frequency (in Hz)",step:.25,min:.25,max:1e3,validate:function(e){return e<this.min?"Frequency should be greater than ".concat(this.min," Hz"):e>this.max?"Frequency should be lesser than ".concat(this.max," Hz"):e%this.step!==0?"Frequency should be divisible by ".concat(this.step," Hz"):null}},{name:"HIGH_DURATION",type:"number",default:1,label:"High duration (in cycles)",min:1,validate:function(e){return e<this.min?"High duration should be greater than ".concat(this.min):null}},{name:"LOW_DURATION",type:"number",default:1,label:"Low duration (in cycles)",min:1,validate:function(e){return e<this.min?"Low duration should be greater than ".concat(this.min):null}}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){this.addOutputPort("out"),this.configurations=e,this.output=0,this.emitInterval=null,this.periodMs=1e3/this.configurations.FREQUENCY_HZ,this.highCount=0,this.lowCount=0}},{key:"onSimulationStart",value:function(){var e=this;this.emit({out:this.output}),this.emitInterval=setInterval((function(){var t=e.output;e.output=e.getNextOutput(),t!==e.output&&e.emit({out:e.output})}),this.periodMs/2)}},{key:"getNextOutput",value:function(){var e=this.configurations,t=e.HIGH_DURATION,n=e.LOW_DURATION;return 1===this.output?(this.highCount+=1,this.highCount===t?(this.highCount=0,0):1):(this.lowCount+=1,this.lowCount===n?(this.lowCount=0,1):0)}},{key:"onSimulationPause",value:function(){clearInterval(this.emitInterval)}},{key:"onSimulationStop",value:function(){clearInterval(this.emitInterval)}}]),n}(Z),widget:jt,icon:Pt});function St(){var e=Object(Q.a)(["\n  position: relative;\n\n  width: 30px;\n  height: ","px;\n"]);return St=function(){return e},e}function Ct(){var e=Object(Q.a)(["\n  position: absolute;\n  ",";\n  ",";\n"]);return Ct=function(){return e},e}var Lt=Object($.a)(Be)(Ct(),(function(e){return"in"===e.name?"left: -5px;":"selection"===e.name?"left: 10px;":"right: -5px;"}),(function(e){return"selection"===e.name?"bottom: -5px;":"top: ".concat((e.position||0)-5,"px;")})),Mt=$.a.div(St(),(function(e){return 15*(e.outputNumber+2)})),At=function(e){var t=e.selected,n=e.outputNumber,i=e.icon,r=15*(n+2);return a.a.createElement("svg",{viewBox:"0 0 30 ".concat(r),height:i?30:r,width:i?15:30,fill:t?"var(--body-selected)":"var(--body-unselected)",stroke:t?"var(--link-selected)":"var(--link-16-bit-color)",strokeLinecap:"round",strokeWidth:"2"},a.a.createElement("path",{d:"M0,15 L0,".concat(r-15," L30,").concat(r," L30,0 Z")}),a.a.createElement("path",{d:"M15,".concat(r-7.5," L15,").concat(r)}))},Tt=function(e){var t=e.model,n=e.engine,i=t.options.selected,r=Object.values(t.getOutputPorts()),o=t.outputNumber;return a.a.createElement(Mt,{outputNumber:o},a.a.createElement(Lt,{name:"in",model:t,port:t.getPort("in"),engine:n,position:15*(o+2)/2}),a.a.createElement(Lt,{name:"selection",model:t,port:t.getPort("selection"),engine:n}),r.map((function(e,i){return a.a.createElement(Lt,{key:e.getName(),name:e.getName(),model:t,port:e,engine:n,position:15*(i+1)})})),a.a.createElement(At,{selected:i,outputNumber:o}))},Bt=function(){return a.a.createElement(At,{dataBits:1,outputNumber:2,icon:!0})},It=new J({type:"Demux",name:"Demux",description:"Demultiplexer",group:"Plexers",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bits",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"OUTPUT_NUMBER",type:"select",default:"2",label:"Number of outputs",options:[{label:"2",value:"2"},{label:"4",value:"4"},{label:"16",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){var t=Number(e.DATA_BITS);this.outputNumber=Number(e.OUTPUT_NUMBER),this.addInputPort("in",t),this.addInputPort("selection",Math.log2(this.outputNumber));for(var n=0;n<this.outputNumber;n+=1)this.addOutputPort("out".concat(n),t)}},{key:"step",value:function(e){return Object(c.a)(Object(c.a)({},Object.fromEntries(Object(v.a)(new Array(this.outputNumber)).map((function(e,t){return["out".concat(t),0]})))),{},Object(I.a)({},"out".concat(e.selection),e.in))}}]),n}(Z),widget:Tt,icon:Bt});function Nt(){var e=Object(Q.a)(["\n  position: relative;\n\n  width: 30px;\n  height: 30px;\n"]);return Nt=function(){return e},e}function zt(){var e=Object(Q.a)(["\n  position: absolute;\n  left: 50%;\n  top: -5px;\n  transform: translateX(-50%);\n"]);return zt=function(){return e},e}var Dt=Object($.a)(Be)(zt()),Rt=$.a.div(Nt()),Ft=function(e){var t=e.selected,n=e.dataBits,i=void 0===n?1:n;return a.a.createElement("svg",{viewBox:"0 0 30 30",width:"30",height:"30",fill:"none",stroke:t?"var(--value-5)":"var(--value-0)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.a.createElement("polyline",{points:"15 0 15 15",strokeWidth:"var(--link-".concat(i,"-bit-width)"),strokeLinecap:"butt"}),a.a.createElement("polyline",{points:"7 15 23 15"}),a.a.createElement("polyline",{points:"7 15 2 25"}),a.a.createElement("polyline",{points:"15 15 9 25"}),a.a.createElement("polyline",{points:"23 15 17 25"}))},Ht=function(e){var t=e.model,n=e.engine,i=t.options.selected;return a.a.createElement(Rt,null,a.a.createElement(Ft,{selected:i,dataBits:t.dataBits}),a.a.createElement(Dt,{name:"out",model:t,port:t.getPort("out"),engine:n}))},_t=function(){return a.a.createElement(Ft,null)},Wt=new J({type:"Ground",name:"Ground",description:"Ground (GND) component",group:"Wiring",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){this.dataBits=Number(e.DATA_BITS),this.addOutputPort("out",this.dataBits)}},{key:"onSimulationStart",value:function(){this.emit({out:0})}}]),n}(Z),widget:Ht,icon:_t});function Ut(){var e=Object(Q.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 20px;\n  height: 20px;\n  margin: 2px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n  border-radius: 100%;\n\n  color: ",";\n  font-family: monospace;\n\n  transition: 100ms linear;\n"]);return Ut=function(){return e},e}function Vt(){var e=Object(Q.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  flex-wrap: wrap-reverse;\n  justify-content: space-evenly;\n  align-items: center;\n\n  max-width: 215px;\n"]);return Vt=function(){return e},e}function Yt(){var e=Object(Q.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n  border-radius: 20px;\n"]);return Yt=function(){return e},e}function Xt(){var e=Object(Q.a)(["\n  position: absolute;\n  right: -7px;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return Xt=function(){return e},e}var Kt={1:{width:30,height:30},2:{width:60,height:30},4:{width:120,height:30},8:{width:120,height:60},16:{width:240,height:60}},Zt=Object($.a)(Be)(Xt()),Gt=$.a.div(Yt(),(function(e){return Kt[e.dataBits].width}),(function(e){return Kt[e.dataBits].height}),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),qt=$.a.div(Vt()),Jt=$.a.button(Ut(),(function(e){return 1===e.value?"var(--value-on)":"var(--value-off)"}),(function(e){return 1===e.value?"var(--value-off)":"var(--value-on)"}),(function(e){return 1===e.value?"black":"white"})),Qt=function(e){var t=e.model,n=e.engine,i=t.options.selected,r=t.configurations.DATA_BITS,o=Number(r);return a.a.createElement(Gt,{selected:i,dataBits:o},a.a.createElement(qt,null,Object(v.a)(new Array(o)).map((function(e,n){var i=t.getBitAt(n);return a.a.createElement(Jt,{key:n,onClick:function(){return t.onClick(n)},value:i},i)}))),a.a.createElement(Zt,{name:"out",model:t,port:t.getPort("out"),engine:n}))},$t=function(){return a.a.createElement(Gt,{dataBits:1},a.a.createElement(Jt,{as:"div",value:0}))},en=new J({type:"Input",name:"Input pin",description:"Simple input pin",group:"Input & output",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){var t=Number(e.DATA_BITS);this.addOutputPort("out",t)}},{key:"onSimulationStart",value:function(){this.emit({out:0})}},{key:"onClick",value:function(e){var t=1<<e;this.emit({out:this.getOutput()^t})}},{key:"getOutput",value:function(){return this.getPort("out").getValue()||0}},{key:"getBitAt",value:function(e){var t=1<<e;return(this.getOutput()&t)>0?1:0}}]),n}(Z),widget:Qt,icon:$t});function tn(){var e=Object(Q.a)(["\n  position: relative;\n\n  width: 30px;\n  height: ","px;\n"]);return tn=function(){return e},e}function nn(){var e=Object(Q.a)(["\n  position: absolute;\n\n  ","\n"]);return nn=function(){return e},e}var an=Object($.a)(Be)(nn(),(function(e){return"out"===e.name?"right: -5px; top: -5px":"left: -5px; bottom: ".concat(e.position-5,"px;")})),rn=$.a.div(tn(),(function(e){return 15*e.dataBits})),on=function(e){var t=e.selected,n=e.dataBits,i=15*n;return a.a.createElement("svg",{viewBox:"0 0 30 ".concat(i),height:i,width:"30",fill:"none",stroke:t?"var(--link-selected)":"var(--link-16-bit-color)",strokeLinecap:"butt",strokeWidth:"2"},a.a.createElement("path",{strokeWidth:"4",d:"M30,0 L15,15 L15,".concat(i)}),Object(v.a)(new Array(n)).map((function(e,t){return t})).map((function(e){var t=i-15*e;return a.a.createElement("path",{key:e,d:"M15,".concat(t," L0,").concat(t)})})))},cn=function(e){var t=e.model,n=e.engine,i=t.options.selected,r=t.configurations.DATA_BITS,o=Number(r),c=Object.values(t.getInputPorts());return a.a.createElement(rn,{dataBits:o},c.map((function(e,i){return a.a.createElement(an,{key:e.getName(),name:e.getName(),model:t,port:e,engine:n,position:15*i})})),a.a.createElement(an,{name:"out",model:t,port:t.getPort("out"),engine:n}),a.a.createElement(on,{selected:i,dataBits:o}))},ln=function(){return a.a.createElement(on,{dataBits:2})},un=new J({type:"Joiner",name:"Joiner",description:"Joins N 1 bit wires into one N bit wire",group:"Wiring",configurations:[{name:"DATA_BITS",type:"select",default:"2",label:"Output data bits",options:[{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){this.bits=Number(e.DATA_BITS);for(var t=0;t<this.bits;t+=1)this.addInputPort("in".concat(t));this.addOutputPort("out",this.bits)}},{key:"step",value:function(e){return{out:Object(v.a)(new Array(this.bits)).map((function(t,n){return e["in".concat(n)]})).reduce((function(e,t,n){return e+t*Math.pow(2,n)}),0)}}}]),n}(Z),widget:cn,icon:ln});function sn(){var e=Object(Q.a)(["\n  position: relative;\n\n  width: 30px;\n  height: 30px;\n\n  background: ",";\n  box-shadow: 0 0 ","px\n    ",";\n  border: 2px solid\n    ",";\n  border-radius: 15px;\n"]);return sn=function(){return e},e}function dn(){var e=Object(Q.a)(["\n  position: absolute;\n  left: -7px;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return dn=function(){return e},e}var fn=Object($.a)(Be)(dn()),pn=$.a.div(sn(),(function(e){return"".concat(e.color).concat(e.selected?"80":"ff")}),(function(e){return e.isActive?15:0}),(function(e){return e.color}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),mn=function(e){var t=e.model,n=e.engine,i=t.options.selected;return a.a.createElement(pn,{selected:i,color:t.getColor(),isActive:t.isActive(),"data-testid":"shape"},a.a.createElement(fn,{name:"in",model:t,port:t.getPort("in"),engine:n}))},gn=function(){return a.a.createElement(pn,{color:"#00ff00"})},hn=new J({type:"Led",name:"LED",description:"Simple LED component",group:"Input & output",configurations:[{name:"ACTIVE_WHEN",type:"select",default:"HIGH",label:"Active when",options:[{label:"High",value:"HIGH"},{label:"Low",value:"LOW"}]},{name:"ON_COLOR",type:"select",default:"#00ff00",label:"On color",options:[{label:"Red",value:"#ff0000"},{label:"Green",value:"#00ff00"},{label:"Blue",value:"#0000ff"},{label:"White",value:"#ffffff"},{label:"Black",value:"#000000"}]},{name:"OFF_COLOR",type:"select",default:"#000000",label:"Off color",options:[{label:"Red",value:"#ff0000"},{label:"Green",value:"#00ff00"},{label:"Blue",value:"#0000ff"},{label:"White",value:"#ffffff"},{label:"Black",value:"#000000"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){this.activeWhen=e.ACTIVE_WHEN,this.colors={on:e.ON_COLOR,off:e.OFF_COLOR},this.addInputPort("in")}},{key:"getInput",value:function(){return this.getPort("in").getValue()||0}},{key:"isActive",value:function(){var e=this.getInput();return"HIGH"===this.activeWhen?0!==e:0===e}},{key:"getColor",value:function(){return this.isActive()?this.colors.on:this.colors.off}}]),n}(Z),widget:mn,icon:gn});function vn(){var e=Object(Q.a)(["\n  position: relative;\n\n  width: 30px;\n  height: ","px;\n"]);return vn=function(){return e},e}function bn(){var e=Object(Q.a)(["\n  position: absolute;\n  ",";\n  ",";\n"]);return bn=function(){return e},e}var yn=Object($.a)(Be)(bn(),(function(e){return"out"===e.name?"right: -5px;":"selection"===e.name?"left: 10px;":"left: -5px;"}),(function(e){return"selection"===e.name?"bottom: -5px;":"top: ".concat((e.position||0)-5,"px;")})),En=$.a.div(vn(),(function(e){return 15*(e.inputNumber+2)})),kn=function(e){var t=e.selected,n=e.inputNumber,i=e.icon,r=15*(n+2);return a.a.createElement("svg",{viewBox:"0 0 30 ".concat(r),height:i?30:r,width:i?15:30,fill:t?"var(--body-selected)":"var(--body-unselected)",stroke:t?"var(--link-selected)":"var(--link-16-bit-color)",strokeLinecap:"round",strokeWidth:"2"},a.a.createElement("path",{d:"M0,0 L0,".concat(r," L30,").concat(r-15," L30,15 Z")}),a.a.createElement("path",{d:"M15,".concat(r-7.5," L15,").concat(r)}))},On=function(e){var t=e.model,n=e.engine,i=t.options.selected,r=Object.values(t.getInputPorts()),o=r.length;return a.a.createElement(En,{inputNumber:o},r.map((function(e,i){return a.a.createElement(yn,{key:e.getName(),name:e.getName(),model:t,port:e,engine:n,position:15*(i+1)})})),a.a.createElement(yn,{name:"out",model:t,port:t.getPort("out"),engine:n,position:15*(o+1)/2}),a.a.createElement(kn,{selected:i,inputNumber:o}))},xn=function(){return a.a.createElement(kn,{dataBits:1,inputNumber:2,icon:!0})},jn=new J({type:"Mux",name:"Mux",description:"Multiplexer",group:"Plexers",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bits",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"INPUT_NUMBER",type:"select",default:"2",label:"Number of inputs",options:[{label:"2",value:"2"},{label:"4",value:"4"},{label:"16",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){for(var t=Number(e.DATA_BITS),n=Number(e.INPUT_NUMBER),i=0;i<n;i+=1)this.addInputPort("in".concat(i),t);this.addInputPort("selection",Math.log2(n)),this.addOutputPort("out",t)}},{key:"step",value:function(e){return{out:e["in".concat(e.selection)]}}}]),n}(Z),widget:On,icon:xn});function Pn(){var e=Object(Q.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"]);return Pn=function(){return e},e}function wn(){var e=Object(Q.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 105px;\n  height: 90px;\n\n  transition: 100ms linear;\n  svg {\n    fill: ",";\n    stroke: ",";\n  }\n"]);return wn=function(){return e},e}var Sn=$.a.div(wn(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Cn=Object($.a)(Be)(Pn(),(function(e){return"out"===e.name?"":"top: ".concat(15*e.position-5,"px;")}),(function(e){return"out"===e.name?"right: -5px":"left: -5px"})),Ln=function(e){var t=e.size,n=void 0===t?90:t;return a.a.createElement("svg",{height:n,width:n+15,viewBox:"0 0 27.781249 23.812501",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},a.a.createElement("g",{transform:"scale(0.26458333)"},a.a.createElement("path",{d:"m 2,2 v 43 a 42.999999,42.999999 0 0 0 0,0.271484 V 88 H 45 A 42.999999,42.999999 0 0 0 88,45 42.999999,42.999999 0 0 0 45,2 h -0.271484 z"}),a.a.createElement("circle",{r:"5.72056",cy:"45",cx:"94.27944"})))},Mn=function(e){var t=e.model,n=e.engine,i=Object.values(t.getInputPorts()),r=Ne(i.length);return a.a.createElement(Sn,{selected:t.isSelected()},a.a.createElement(De,{selected:t.isSelected(),portPositions:r}),i.map((function(e,i){return a.a.createElement(Cn,{key:e.getName(),name:e.getName(),model:t,port:e,engine:n,position:r[i]})})),a.a.createElement(Cn,{name:"out",model:t,port:t.getPort("out"),engine:n}),a.a.createElement(Ln,null))},An=function(){return a.a.createElement(Ln,{size:30})},Tn=new J({type:"Nand",name:"Nand",description:'Logic "not and" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:16,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){for(var t=Number(e.INPUT_PORTS_NUMBER),n=Number(e.DATA_BITS),i=0;i<t;i+=1)this.addInputPort("in".concat(i),n);this.addOutputPort("out",n)}},{key:"step",value:function(e){return{out:~Object.values(e).reduce((function(e,t){return e&t}))}}}]),n}(Z),widget:Mn,icon:An});function Bn(){var e=Object(Q.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"]);return Bn=function(){return e},e}function In(){var e=Object(Q.a)(["\n  position: absolute;\n  z-index: -1;\n\n  background: ",";\n\n  height: 2px;\n  width: 15px;\n\n  top: ","px;\n  left: -2px;\n"]);return In=function(){return e},e}function Nn(){var e=Object(Q.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 105px;\n  height: 90px;\n\n  transition: 100ms linear;\n  svg {\n    fill: ",";\n    stroke: ",";\n  }\n"]);return Nn=function(){return e},e}var zn=$.a.div(Nn(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Dn=$.a.div(In(),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"}),(function(e){return 15*e.position-1})),Rn=Object($.a)(Be)(Bn(),(function(e){return"out"===e.name?"":"top: ".concat(15*e.position-5,"px;")}),(function(e){return"out"===e.name?"right: -5px":"left: -5px"})),Fn=function(e){var t=e.size,n=void 0===t?90:t,i=e.portPositions,r=void 0===i?[]:i;return a.a.createElement("svg",{height:n,width:n+15,viewBox:"0 0 27.781249 23.812501",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},a.a.createElement("g",{transform:"scale(0.26458333)"},a.a.createElement("path",{d:"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 45 C 68.748245,88.000001 88.005576,45.650843 88,45 87.994195,44.322314 68.748245,1.9999989 45,2 h -0.271484 z"}),a.a.createElement("circle",{r:"5.72056",cy:"45",cx:"94.27944"})),a.a.createElement("g",{strokeWidth:.5},r.includes(1)&&a.a.createElement("path",{d:"M 4.8860442,4.1010415 H 0.38245295"}),r.includes(2)&&a.a.createElement("path",{d:"M 5.3419835,8.0697915 H 0.38232292"}),r.includes(3)&&a.a.createElement("path",{d:"M 5.5975927,12.038541 H 0.38232292"}),r.includes(4)&&a.a.createElement("path",{d:"M 5.2516863,16.007291 H 0.38232292"}),r.includes(5)&&a.a.createElement("path",{d:"M 4.3916654,19.976041 H 0.38232292"})))},Hn=function(e){var t=e.model,n=e.engine,r=Object.values(t.getInputPorts()),o=Ne(r.length);return a.a.createElement(zn,{selected:t.options.selected},a.a.createElement(De,{selected:t.isSelected(),portPositions:o,offsetX:12}),r.map((function(e,r){return a.a.createElement(i.Fragment,{key:e.getName()},a.a.createElement(Rn,{name:e.getName(),model:t,port:e,engine:n,position:o[r]}),(o[r]<1||o[r]>5)&&a.a.createElement(Dn,{selected:t.isSelected(),position:o[r]}))})),a.a.createElement(Rn,{name:"out",model:t,port:t.getPort("out"),engine:n}),a.a.createElement(Fn,{portPositions:o}))},_n=function(){return a.a.createElement(Fn,{size:30})},Wn=new J({type:"Nor",name:"Nor",description:'Logic "not or" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:16,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){for(var t=Number(e.INPUT_PORTS_NUMBER),n=Number(e.DATA_BITS),i=0;i<t;i+=1)this.addInputPort("in".concat(i),n);this.addOutputPort("out",n)}},{key:"step",value:function(e){return{out:~Object.values(e).reduce((function(e,t){return e|t}))}}}]),n}(Z),widget:Hn,icon:_n});function Un(){var e=Object(Q.a)(["\n  position: absolute;\n  ","\n"]);return Un=function(){return e},e}function Vn(){var e=Object(Q.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 45px;\n  height: 30px;\n\n  transition: 100ms linear;\n  svg {\n    fill: ",";\n    stroke: ",";\n  }\n"]);return Vn=function(){return e},e}var Yn=$.a.div(Vn(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Xn=Object($.a)(Be)(Un(),(function(e){return"in"===e.name?"left: -5px;":"out"===e.name?"right: -5px;":""})),Kn=function(e){var t=e.size,n=void 0===t?30:t;return a.a.createElement("svg",{height:n,width:n+15,viewBox:"11 0 45.0 45.0",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},a.a.createElement("g",null,a.a.createElement("path",{d:"M 1.0207771,1.6492624 V 43.357967 L 42.724327,22.649262 Z"}),a.a.createElement("circle",{r:"8",cy:"22",cx:"51"})))},Zn=function(e){var t=e.model,n=e.engine,i=t.options.selected;return a.a.createElement(Yn,{selected:i},a.a.createElement(Xn,{name:"in",model:t,port:t.getPort("in"),engine:n}),a.a.createElement(Xn,{name:"out",model:t,port:t.getPort("out"),engine:n}),a.a.createElement(Kn,null))},Gn=function(){return a.a.createElement(Kn,{size:30})},qn=new J({type:"Not",name:"Not",description:"Negation component",group:"Logic gates",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){var t=Number(e.DATA_BITS);this.addInputPort("in",t),this.addOutputPort("out",t)}},{key:"step",value:function(e){return{out:~e.in}}}]),n}(Z),widget:Zn,icon:Gn});function Jn(){var e=Object(Q.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"]);return Jn=function(){return e},e}function Qn(){var e=Object(Q.a)(["\n  position: absolute;\n  z-index: -1;\n\n  background: ",";\n\n  height: 2px;\n  width: 15px;\n\n  top: ","px;\n  left: -2px;\n"]);return Qn=function(){return e},e}function $n(){var e=Object(Q.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 90px;\n\n  transition: 100ms linear;\n  svg {\n    fill: ",";\n    stroke: ",";\n  }\n"]);return $n=function(){return e},e}var ei=$.a.div($n(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),ti=$.a.div(Qn(),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"}),(function(e){return 15*e.position-1})),ni=Object($.a)(Be)(Jn(),(function(e){return"out"===e.name?"":"top: ".concat(15*e.position-5,"px;")}),(function(e){return"out"===e.name?"right: -5px":"left: -5px"})),ii=function(e){var t=e.size,n=void 0===t?90:t,i=e.portPositions,r=void 0===i?[]:i;return a.a.createElement("svg",{height:n,width:n,viewBox:"0 0 23.812499 23.812501",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},a.a.createElement("g",null,a.a.createElement("path",{d:"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 45 C 68.748245,88.000001 88.005576,45.650843 88,45 87.994195,44.322314 68.748245,1.9999989 45,2 h -0.271484 z",transform:"scale(0.26458333)"})),a.a.createElement("g",{strokeWidth:.5},r.includes(1)&&a.a.createElement("path",{d:"M 4.8860442,4.1010415 H 0.38245295"}),r.includes(2)&&a.a.createElement("path",{d:"M 5.3419835,8.0697915 H 0.38232292"}),r.includes(3)&&a.a.createElement("path",{d:"M 5.5975927,12.038541 H 0.38232292"}),r.includes(4)&&a.a.createElement("path",{d:"M 5.2516863,16.007291 H 0.38232292"}),r.includes(5)&&a.a.createElement("path",{d:"M 4.3916654,19.976041 H 0.38232292"})))},ai=function(e){var t=e.model,n=e.engine,r=Object.values(t.getInputPorts()),o=Ne(r.length);return a.a.createElement(ei,{selected:t.options.selected},a.a.createElement(De,{selected:t.isSelected(),portPositions:o,offsetX:12}),r.map((function(e,r){return a.a.createElement(i.Fragment,{key:e.getName()},a.a.createElement(ni,{name:e.getName(),model:t,port:e,engine:n,position:o[r]}),(o[r]<1||o[r]>5)&&a.a.createElement(ti,{selected:t.isSelected(),position:o[r]}))})),a.a.createElement(ni,{name:"out",model:t,port:t.getPort("out"),engine:n}),a.a.createElement(ii,{portPositions:o}))},ri=function(){return a.a.createElement(ii,{size:30})},oi=new J({type:"Or",name:"Or",description:'Logic "or" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:16,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){for(var t=Number(e.INPUT_PORTS_NUMBER),n=Number(e.DATA_BITS),i=0;i<t;i+=1)this.addInputPort("in".concat(i),n);this.addOutputPort("out",n)}},{key:"step",value:function(e){return{out:Object.values(e).reduce((function(e,t){return e|t}))}}}]),n}(Z),widget:ai,icon:ri});function ci(){var e=Object(Q.a)(["\n  color: var(--value-error);\n  font-weight: bold;\n"]);return ci=function(){return e},e}function li(){var e=Object(Q.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 20px;\n  height: 20px;\n  margin: 2px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n  border-radius: 100%;\n\n  color: ",";\n  font-family: monospace;\n\n  transition: 100ms linear;\n"]);return li=function(){return e},e}function ui(){var e=Object(Q.a)(["\n  display: flex;\n  flex-direction: row-reverse;\n  flex-wrap: wrap-reverse;\n  justify-content: space-evenly;\n  align-items: center;\n\n  max-width: 215px;\n"]);return ui=function(){return e},e}function si(){var e=Object(Q.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n  border-radius: 20px;\n"]);return si=function(){return e},e}function di(){var e=Object(Q.a)(["\n  position: absolute;\n  left: -7px;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return di=function(){return e},e}var fi={1:{width:30,height:30},2:{width:60,height:30},4:{width:120,height:30},8:{width:120,height:60},16:{width:240,height:60}},pi=Object($.a)(Be)(di()),mi=$.a.div(si(),(function(e){return"BITS"===e.format?fi[e.dataBits].width:fi[4].width}),(function(e){return"BITS"===e.format?fi[e.dataBits].height:fi[4].height}),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),gi=$.a.span(ui()),hi=$.a.div(li(),(function(e){return 0===e.value?"var(--value-off)":1===e.value?"var(--value-on)":"var(--value-error)"}),(function(e){return 0===e.value?"var(--value-on)":1===e.value?"var(--value-off)":"black"}),(function(e){return 1===e.value?"black":"white"})),vi=$.a.span(ci()),bi=function(e){var t,n,i=e.model,r=e.engine,o=i.options.selected,c=i.configurations,l=c.OUTPUT_FORMAT,u=c.DATA_BITS,s=Number(u);return a.a.createElement(mi,{selected:o,format:l,dataBits:s},a.a.createElement(gi,{"data-testid":"pin-container"},"BITS"===l?function(e){var t=e.configurations.DATA_BITS,n=Number(t);return Object(v.a)(new Array(n)).map((function(t,n){var i=e.getBitAt(n);return a.a.createElement(hi,{key:n,value:i},0===i||1===i?i:"E")}))}(i):(t=i.getInput(),n=l,"error"===t?a.a.createElement(vi,null,"ERROR"):"DECIMAL"===n?t:"HEXADECIMAL"===n?"0x".concat(t.toString(16).padStart(4,"0")):"")),a.a.createElement(pi,{name:"in",model:i,port:i.getPort("in"),engine:r}))},yi=function(){return a.a.createElement(mi,{dataBits:1,format:"BITS"},a.a.createElement(hi,{as:"div",value:0}))},Ei=new J({type:"Output",name:"Output pin",description:"Simple output pin",group:"Input & output",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"OUTPUT_FORMAT",type:"select",default:"BITS",label:"Output format",options:[{label:"Bit by bit",value:"BITS"},{label:"Decimal number",value:"DECIMAL"},{label:"Hexadecimal number",value:"HEXADECIMAL"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){var t=Number(e.DATA_BITS);this.addInputPort("in",t)}},{key:"getInput",value:function(){return this.getPort("in").getValue()||0}},{key:"getBitAt",value:function(e){var t=this.getInput();if("error"===t)return t;var n=1<<e;return(this.getInput()&n)>0?1:0}}]),n}(Z),widget:bi,icon:yi});function ki(){var e=Object(Q.a)(["\n  position: relative;\n\n  width: 30px;\n  height: 30px;\n"]);return ki=function(){return e},e}function Oi(){var e=Object(Q.a)(["\n  position: absolute;\n  left: 50%;\n  bottom: -5px;\n  transform: translateX(-50%);\n"]);return Oi=function(){return e},e}var xi=Object($.a)(Be)(Oi()),ji=$.a.div(ki()),Pi=function(e){var t=e.selected,n=e.dataBits,i=void 0===n?1:n;return a.a.createElement("svg",{viewBox:"0 0 30 30",width:"30",height:"30",fill:"none",stroke:t?"var(--value-5)":"var(--value-10)",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.a.createElement("polyline",{points:"15 15 15 30",strokeWidth:"var(--link-".concat(i,"-bit-width)"),strokeLinecap:"butt"}),a.a.createElement("polyline",{points:"7 15 15 0 23 15 7 15",fill:"var(--value-2)",fillOpacity:t?"var(--unselected-opacity)":"var(--selected-opacity)"}))},wi=function(e){var t=e.model,n=e.engine,i=t.options.selected;return a.a.createElement(ji,null,a.a.createElement(Pi,{selected:i,dataBits:t.dataBits}),a.a.createElement(xi,{name:"out",model:t,port:t.getPort("out"),engine:n}))},Si=function(){return a.a.createElement(Pi,null)},Ci=new J({type:"Power",name:"Power",description:"Power (VCC) component",group:"Wiring",configurations:[{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){this.dataBits=Number(e.DATA_BITS),this.addOutputPort("out",this.dataBits)}},{key:"onSimulationStart",value:function(){this.emit({out:65535})}}]),n}(Z),widget:wi,icon:Si});function Li(){var e=Object(Q.a)(["\n  position: relative;\n\n  width: 30px;\n  height: ","px;\n"]);return Li=function(){return e},e}function Mi(){var e=Object(Q.a)(["\n  position: absolute;\n  ",";\n  bottom: ","px;\n"]);return Mi=function(){return e},e}var Ai=Object($.a)(Be)(Mi(),(function(e){return"in"===e.name?"left: -5px":"right: -5px"}),(function(e){return(e.position||0)-5})),Ti=$.a.div(Li(),(function(e){return 15*e.dataBits})),Bi=function(e){var t=e.selected,n=e.dataBits,i=15*n;return a.a.createElement("svg",{viewBox:"0 0 30 ".concat(i),height:i,width:"30",fill:"none",stroke:t?"var(--link-selected)":"var(--link-16-bit-color)",strokeLinecap:"butt",strokeWidth:"2"},a.a.createElement("path",{strokeWidth:"4",d:"M0,".concat(i," L15,").concat(i-15," L15,0")}),Object(v.a)(new Array(n)).map((function(e,t){return t+1})).map((function(e){var t=i-15*e;return a.a.createElement("path",{key:e,d:"M15,".concat(t," L30,").concat(t)})})))},Ii=function(e){var t=e.model,n=e.engine,i=t.options.selected,r=t.configurations.DATA_BITS,o=Number(r),c=Object.values(t.getOutputPorts());return a.a.createElement(Ti,{dataBits:o},a.a.createElement(Ai,{name:"in",model:t,port:t.getPort("in"),engine:n}),c.map((function(e,i){return a.a.createElement(Ai,{key:e.getName(),name:e.getName(),model:t,port:e,engine:n,position:15*(i+1)})})),a.a.createElement(Bi,{selected:i,dataBits:o}))},Ni=function(){return a.a.createElement(Bi,{dataBits:2})},zi=new J({type:"Splitter",name:"Splitter",description:"Split wire with N bits into N 1 bit wires",group:"Wiring",configurations:[{name:"DATA_BITS",type:"select",default:"2",label:"Input data bits",options:[{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){this.bits=Number(e.DATA_BITS),this.addInputPort("in",this.bits);for(var t=0;t<this.bits;t+=1)this.addOutputPort("out".concat(t))}},{key:"getBitAt",value:function(e,t){return(e&1<<t)>0?1:0}},{key:"step",value:function(e){var t=this;return Object.fromEntries(Object(v.a)(new Array(this.bits)).map((function(n,i){return["out".concat(i),t.getBitAt(e.in,i)]})))}}]),n}(Z),widget:Ii,icon:Ni});function Di(){var e=Object(Q.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: ","px;\n  height: ","px;\n\n  background: ",";\n  box-shadow: 0 0 ","px\n    ",";\n  border: 2px solid\n    ",";\n  border-radius: 5px;\n"]);return Di=function(){return e},e}function Ri(){var e=Object(Q.a)(["\n  position: absolute;\n  left: ","px;\n  top: ","px;\n  transform: translateY(-50%);\n"]);return Ri=function(){return e},e}var Fi=["a","b","c","d","e","f","g","dp"],Hi=Object($.a)(Be)(Ri(),(function(e){return e.position.horizontal}),(function(e){return e.position.vertical})),_i=$.a.div(Di(),(function(e){return e.icon?23:75}),(function(e){return e.icon?36:90}),(function(e){return"#ffffff".concat(e.selected?"80":"ff")}),(function(e){return e.isActive?15:0}),(function(e){return e.color}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Wi=function(e){var t=e.segments,n=e.selected,i=e.icon;return a.a.createElement("svg",{width:i?18:50,height:i?36:90,viewBox:i?"-7 0 60 90":"0 0 50 90",fill:"none",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.a.createElement("polyline",{points:"5 18 11 20 32 20 35 14 9 14",fill:"".concat(t.a).concat(n?"80":"ff"),"data-testid":"a"}),a.a.createElement("polyline",{points:"37 14 41 20 39 42 37 44 33 39 34 20",fill:"".concat(t.b).concat(n?"80":"ff"),"data-testid":"b"}),a.a.createElement("polyline",{points:"37 46 38 47 36 71 31 76 29 69 31 51",fill:"".concat(t.c).concat(n?"80":"ff"),"data-testid":"c"}),a.a.createElement("polyline",{points:"0 72 7 69 27 69 29 76 4 76",fill:"".concat(t.d).concat(n?"80":"ff"),"data-testid":"d"}),a.a.createElement("polyline",{points:"4 46 8 51 7 67 0 70 2 47",fill:"".concat(t.e).concat(n?"80":"ff"),"data-testid":"e"}),a.a.createElement("polyline",{points:"5 20 11 22 10 39 4 44 3 42",fill:"".concat(t.f).concat(n?"80":"ff"),"data-testid":"f"}),a.a.createElement("polyline",{points:"6 45 9 48 31 48 35 45 32 41 11 41",fill:"".concat(t.g).concat(n?"80":"ff"),"data-testid":"g"}),a.a.createElement("circle",{r:"5",cx:"45",cy:"71",fill:"".concat(t.dp).concat(n?"80":"ff"),"data-testid":"dp"}))},Ui=function(e){var t=e.model,n=e.engine,i=t.options.selected;return a.a.createElement(_i,{selected:i},a.a.createElement(Wi,{selected:i,segments:Fi.reduce((function(e,n){return Object(c.a)(Object(c.a)({},e),{},Object(I.a)({},n,t.getColor(n)))}),{})}),Fi.map((function(e){return a.a.createElement(Hi,{key:e,name:e,model:t,position:t.getPositionForSegment(e),port:t.getPort(e),engine:n})})))},Vi=function(){return a.a.createElement(_i,{icon:!0},a.a.createElement(Wi,{icon:!0,segments:{a:"#ff0000",b:"#ff0000",c:"#ff0000",d:"#ff0000",e:"#ff0000",f:"#ff0000",g:"#ff0000",dp:"#ff0000"}}))},Yi=new J({type:"Ssd",name:"SSD",description:"Seven segments display",group:"Input & output",configurations:[{name:"ACTIVE_WHEN",type:"select",default:"HIGH",label:"Active when",options:[{label:"High",value:"HIGH"},{label:"Low",value:"LOW"}]},{name:"ON_COLOR",type:"select",default:"#ff0000",label:"On color",options:[{label:"Red",value:"#ff0000"},{label:"Green",value:"#00ff00"},{label:"Blue",value:"#0000ff"},{label:"White",value:"#ffffff"},{label:"Black",value:"#000000"}]},{name:"OFF_COLOR",type:"select",default:"#000000",label:"Off color",options:[{label:"Red",value:"#ff0000"},{label:"Green",value:"#00ff00"},{label:"Blue",value:"#0000ff"},{label:"White",value:"#ffffff"},{label:"Black",value:"#000000"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){this.activeWhen=e.ACTIVE_WHEN,this.colors={on:e.ON_COLOR,off:e.OFF_COLOR},this.addInputPort("a"),this.addInputPort("b"),this.addInputPort("c"),this.addInputPort("d"),this.addInputPort("e"),this.addInputPort("f"),this.addInputPort("g"),this.addInputPort("dp")}},{key:"getInput",value:function(e){return this.getPort(e).getValue()||0}},{key:"isActive",value:function(e){var t=this.getInput(e);return"HIGH"===this.activeWhen?0!==t:0===t}},{key:"getPositionForSegment",value:function(e){var t={a:{vertical:1,horizontal:3},b:{vertical:1,horizontal:4},c:{vertical:2,horizontal:3},d:{vertical:2,horizontal:2},e:{vertical:2,horizontal:1},f:{vertical:1,horizontal:2},g:{vertical:1,horizontal:1},dp:{vertical:2,horizontal:4}}[e];return{horizontal:8+15*(t.horizontal-1),vertical:1===t.vertical?-2:88}}},{key:"getColor",value:function(e){return this.isActive(e)?this.colors.on:this.colors.off}}]),n}(Z),widget:Ui,icon:Vi});function Xi(){var e=Object(Q.a)(["\n  transform: ",";\n\n  width: 15px;\n  height: 15px;\n\n  border-radius: 100%;\n  transition: 100ms linear;\n  background: black;\n"]);return Xi=function(){return e},e}function Ki(){var e=Object(Q.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 40px;\n  height: 24px;\n  margin: 2px;\n\n  background: #848484;\n  border: 2px solid #313131;\n  border-radius: 15px;\n\n  color: ",";\n  font-family: monospace;\n"]);return Ki=function(){return e},e}function Zi(){var e=Object(Q.a)(["\n  position: relative;\n\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 45px;\n  height: 30px;\n\n  background: ",";\n  border: 2px solid\n    ",";\n  border-radius: 20px;\n"]);return Zi=function(){return e},e}function Gi(){var e=Object(Q.a)(["\n  position: absolute;\n  right: -7px;\n  top: 50%;\n  transform: translateY(-50%);\n"]);return Gi=function(){return e},e}var qi=Object($.a)(Be)(Gi()),Ji=$.a.div(Zi(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),Qi=$.a.button(Ki(),(function(e){return 1===e.value?"black":"white"})),$i=$.a.div(Xi(),(function(e){return 1===e.value?"translateX(6px)":"translateX(-6px)"})),ea=function(e){var t=e.model,n=e.engine,i=t.options.selected;return a.a.createElement(Ji,{selected:i},a.a.createElement(Qi,{onClick:function(){return t.onClick()}},a.a.createElement($i,{value:t.getOutput()})),a.a.createElement(qi,{name:"out",model:t,port:t.getPort("out"),engine:n}))},ta=function(){return a.a.createElement(Ji,null,a.a.createElement(Qi,{as:"div"},a.a.createElement($i,{value:0})))},na=new J({type:"Switch",name:"Switch",description:"On/off switch",group:"Input & output",configurations:[],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(){this.addOutputPort("out")}},{key:"onSimulationStart",value:function(){this.emit({out:0})}},{key:"onClick",value:function(e){var t=1<<e;this.emit({out:this.getOutput()^t})}},{key:"getOutput",value:function(){return this.getPort("out").getValue()||0}}]),n}(Z),widget:ea,icon:ta});function ia(){var e=Object(Q.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"]);return ia=function(){return e},e}function aa(){var e=Object(Q.a)(["\n  position: absolute;\n  z-index: -1;\n\n  background: ",";\n\n  height: 2px;\n  width: 15px;\n\n  top: ","px;\n  left: -2px;\n"]);return aa=function(){return e},e}function ra(){var e=Object(Q.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 105px;\n  height: 90px;\n\n  transition: 100ms linear;\n  svg {\n    fill: ",";\n    stroke: ",";\n  }\n"]);return ra=function(){return e},e}var oa=$.a.div(ra(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),ca=$.a.div(aa(),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"}),(function(e){return 15*e.position-1})),la=Object($.a)(Be)(ia(),(function(e){return"out"===e.name?"":"top: ".concat(15*e.position-5,"px;")}),(function(e){return"out"===e.name?"right: -5px":"left: -5px"})),ua=function(e){var t=e.size,n=void 0===t?90:t,i=e.portPositions,r=void 0===i?[]:i;return a.a.createElement("svg",{height:n,width:n+15,viewBox:"0 0 27.781249 23.812501",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},a.a.createElement("g",null,a.a.createElement("path",{fill:"none",style:{transform:"scale(0.284583, 0.284583) translate(-1px, -3px)"},d:"m 11.926664,1.1161165 c 5.50133,9.5176855 9.663162,25.9796645 9.66318,42.6065395 m 0,0 c 1.62e-4,18.330222 -4.950245,36.216284 -11.386335,45.249616"}),a.a.createElement("g",{transform:"scale(0.26458333)"},a.a.createElement("path",{d:"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 37.875 c 23.748245,0 43.005576,-42.349157 43,-43 -0.0058,-0.677686 -19.251755,-43 -43,-43 h -0.271484 z",transform:"translate(7)"}),a.a.createElement("circle",{r:"5.72056",cy:"45",cx:"94.27944"}))),a.a.createElement("g",{strokeWidth:.5},r.includes(1)&&a.a.createElement("path",{d:"M 4.8860442,4.1010415 H 0.38245295"}),r.includes(2)&&a.a.createElement("path",{d:"M 5.3419835,8.0697915 H 0.38232292"}),r.includes(3)&&a.a.createElement("path",{d:"M 5.5975927,12.038541 H 0.38232292"}),r.includes(4)&&a.a.createElement("path",{d:"M 5.2516863,16.007291 H 0.38232292"}),r.includes(5)&&a.a.createElement("path",{d:"M 4.3916654,19.976041 H 0.38232292"})))},sa=function(e){var t=e.model,n=e.engine,r=Object.values(t.getInputPorts()),o=Ne(r.length);return a.a.createElement(oa,{selected:t.options.selected},a.a.createElement(De,{selected:t.isSelected(),portPositions:o,offsetX:12}),r.map((function(e,r){return a.a.createElement(i.Fragment,{key:e.getName()},a.a.createElement(la,{name:e.getName(),model:t,port:e,engine:n,position:o[r]}),(o[r]<1||o[r]>5)&&a.a.createElement(ca,{selected:t.isSelected(),position:o[r]}))})),a.a.createElement(la,{name:"out",model:t,port:t.getPort("out"),engine:n}),a.a.createElement(ua,{portPositions:o}))},da=function(){return a.a.createElement(ua,{size:30})},fa=new J({type:"Xnor",name:"Xnor",description:'Logic "not exclusive or" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:16,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"MULTIPLE_INPUT_BEHAVIOR",type:"select",default:"ONE",label:"Multiple input behavior",options:[{label:"Detect when only one input is on",value:"ONE"},{label:"Detect when an odd number of inputs are on",value:"ODD"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){this.behavior=e.MULTIPLE_INPUT_BEHAVIOR,this.bits=Number(e.DATA_BITS);for(var t=Number(e.INPUT_PORTS_NUMBER),n=0;n<t;n+=1)this.addInputPort("in".concat(n),this.bits);this.addOutputPort("out",this.bits)}},{key:"notExclusiveOrAt",value:function(e,t){var n=1<<t;return 1===e.map((function(e){return(e&n)>0?1:0})).reduce((function(e,t){return e+t}))?0:1}},{key:"step",value:function(e){var t=this,n=4294967295>>>32-this.bits,i=Object.values(e);switch(this.behavior){case"ONE":return{out:parseInt(Object(v.a)(new Array(this.bits)).map((function(e,n){return t.notExclusiveOrAt(i,n)})).reverse().join(""),2)};case"ODD":return{out:~i.reduce((function(e,t){return t^e}))&n};default:return{}}}}]),n}(Z),widget:sa,icon:da});function pa(){var e=Object(Q.a)(["\n  position: absolute;\n\n  ","\n\n  ",";\n"]);return pa=function(){return e},e}function ma(){var e=Object(Q.a)(["\n  position: absolute;\n  z-index: -1;\n\n  background: ",";\n\n  height: 2px;\n  width: 15px;\n\n  top: ","px;\n  left: -2px;\n"]);return ma=function(){return e},e}function ga(){var e=Object(Q.a)(["\n  position: relative;\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  width: 90px;\n  height: 90px;\n\n  transition: 100ms linear;\n  svg {\n    fill: ",";\n    stroke: ",";\n  }\n"]);return ga=function(){return e},e}var ha=$.a.div(ga(),(function(e){return e.selected?"var(--body-selected)":"var(--body-unselected)"}),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"})),va=$.a.div(ma(),(function(e){return e.selected?"var(--border-selected)":"var(--border-unselected)"}),(function(e){return 15*e.position-1})),ba=Object($.a)(Be)(pa(),(function(e){return"out"===e.name?"":"top: ".concat(15*e.position-5,"px;")}),(function(e){return"out"===e.name?"right: -5px":"left: -5px"})),ya=function(e){var t=e.size,n=void 0===t?90:t,i=e.portPositions,r=void 0===i?[]:i;return a.a.createElement("svg",{height:n,width:n,viewBox:"0 0 23.812499 23.812501",fill:"var(--body-unselected)",stroke:"var(--border-unselected)",strokeWidth:"var(--border-width)"},a.a.createElement("g",null,a.a.createElement("path",{fill:"none",style:{transform:"scale(0.284583, 0.284583) translate(-1px, -3px)"},d:"m 11.926664,1.1161165 c 5.50133,9.5176855 9.663162,25.9796645 9.66318,42.6065395 m 0,0 c 1.62e-4,18.330222 -4.950245,36.216284 -11.386335,45.249616"}),a.a.createElement("g",{transform:"translate(1.8657598)"},a.a.createElement("path",{d:"m 12.810547,2 c 5.50133,9.517685 8.779279,25.095781 8.779297,41.722656 C 21.590006,62.052878 17.611871,78.966668 11.175781,88 H 37.875 c 23.748245,0 43.005576,-42.349157 43,-43 -0.0058,-0.677686 -19.251755,-43 -43,-43 h -0.271484 z",transform:"scale(0.26458333)"}))),a.a.createElement("g",{strokeWidth:.5},r.includes(1)&&a.a.createElement("path",{d:"M 4.8860442,4.1010415 H 0.38245295"}),r.includes(2)&&a.a.createElement("path",{d:"M 5.3419835,8.0697915 H 0.38232292"}),r.includes(3)&&a.a.createElement("path",{d:"M 5.5975927,12.038541 H 0.38232292"}),r.includes(4)&&a.a.createElement("path",{d:"M 5.2516863,16.007291 H 0.38232292"}),r.includes(5)&&a.a.createElement("path",{d:"M 4.3916654,19.976041 H 0.38232292"})))},Ea=function(e){var t=e.model,n=e.engine,r=Object.values(t.getInputPorts()),o=Ne(r.length);return a.a.createElement(ha,{selected:t.options.selected},a.a.createElement(De,{selected:t.isSelected(),portPositions:o,offsetX:12}),r.map((function(e,r){return a.a.createElement(i.Fragment,{key:e.getName()},a.a.createElement(ba,{name:e.getName(),model:t,port:e,engine:n,position:o[r]}),(o[r]<1||o[r]>5)&&a.a.createElement(va,{selected:t.isSelected(),position:o[r]}))})),a.a.createElement(ba,{name:"out",model:t,port:t.getPort("out"),engine:n}),a.a.createElement(ya,{portPositions:o}))},ka=function(){return a.a.createElement(ya,{size:30})},Oa=[en,Ei,lt,na,wt,hn,Yi,bt,Ye,Tn,oi,Wn,new J({type:"Xor",name:"Xor",description:'Logic "exclusive or" gate',group:"Logic gates",configurations:[{name:"INPUT_PORTS_NUMBER",type:"number",default:2,label:"Number of input ports",min:2,max:16,validate:function(e){return e<this.min?"Minimum input ports is ".concat(this.min):e>this.max?"Maximum input ports is ".concat(this.max):null}},{name:"DATA_BITS",type:"select",default:"1",label:"Data bits",options:[{label:"1 bit",value:"1"},{label:"2 bits",value:"2"},{label:"4 bits",value:"4"},{label:"8 bits",value:"8"},{label:"16 bits",value:"16"}]},{name:"MULTIPLE_INPUT_BEHAVIOR",type:"select",default:"ONE",label:"Multiple input behavior",options:[{label:"Detect when only one input is on",value:"ONE"},{label:"Detect when an odd number of inputs are on",value:"ODD"}]}],model:function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(){return Object(f.a)(this,n),t.apply(this,arguments)}return Object(p.a)(n,[{key:"initialize",value:function(e){this.behavior=e.MULTIPLE_INPUT_BEHAVIOR,this.bits=Number(e.DATA_BITS);for(var t=Number(e.INPUT_PORTS_NUMBER),n=0;n<t;n+=1)this.addInputPort("in".concat(n),this.bits);this.addOutputPort("out",this.bits)}},{key:"exclusiveOrAt",value:function(e,t){var n=1<<t;return 1===e.map((function(e){return(e&n)>0?1:0})).reduce((function(e,t){return e+t}))?1:0}},{key:"step",value:function(e){var t=this,n=Object.values(e);switch(this.behavior){case"ONE":return{out:parseInt(Object(v.a)(new Array(this.bits)).map((function(e,i){return t.exclusiveOrAt(n,i)})).reverse().join(""),2)};case"ODD":return{out:n.reduce((function(e,t){return t^e}))};default:return{}}}}]),n}(Z),widget:Ea,icon:ka}),fa,$e,qn,zi,un,Ci,Wt,jn,It],xa=Oa,ja=Oa.reduce((function(e,t){var n=e.find((function(e){return e.name===t.group}));return n?n.components.push(t):e.push({name:t.group,components:[t]}),e}),[]),Pa=n(262),wa=n.n(Pa);function Sa(){var e=Object(Q.a)(["\n  border: none;\n  border-radius: 100%;\n\n  background: orange;\n  box-shadow: inset 0 0 10px #ff8d00;\n\n  width: 60px;\n  height: 60px;\n  margin: 16px;\n\n  font-size: 2em;\n  line-height: 1em;\n  color: white;\n\n  transition: 0.5s ease-in-out;\n\n  &:disabled {\n    opacity: 10%;\n    cursor: not-allowed;\n    background: gray;\n    box-shadow: inset 0 0 10px black;\n  }\n"]);return Sa=function(){return e},e}function Ca(){var e=Object(Q.a)(["\n  position: absolute;\n  bottom: 0;\n  right: 0;\n\n  z-index: 2;\n"]);return Ca=function(){return e},e}var La=$.a.div(Ca()),Ma=$.a.button.attrs((function(e){var t=Object.assign({},e);return Object(c.a)(Object(c.a)({},t),{},{type:"button"})}))(Sa()),Aa=function(e){var t=e.handleClick,n=e.disabled;return a.a.createElement(La,{id:"component-select-button"},a.a.createElement(Ma,{onClick:t,disabled:n,"data-for":"tooltip","data-tip":"Add component...","data-place":"left"},"+"))},Ta=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,fill:r,viewBox:"100 100 300 300"},a.a.createElement("polygon",{points:"352,128.4 319.7,96 160,256 160,256 160,256 319.7,416 352,383.6 224.7,256 "}))},Ba=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,fill:r,viewBox:"0 0 48 48"},a.a.createElement("polygon",{points:"5,30.9 8.1,34 24,18.1 39.9,34 43,30.9 24,12"}))},Ia=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.a.createElement("polyline",{points:"17 11 12 6 7 11"}),a.a.createElement("polyline",{points:"17 18 12 13 7 18"}))},Na=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,fill:r,viewBox:"0 0 60.963 60.842"},a.a.createElement("path",{d:"M59.595,52.861L37.094,30.359L59.473,7.98c1.825-1.826,1.825-4.786,0-6.611  c-1.826-1.825-4.785-1.825-6.611,0L30.483,23.748L8.105,1.369c-1.826-1.825-4.785-1.825-6.611,0c-1.826,1.826-1.826,4.786,0,6.611  l22.378,22.379L1.369,52.861c-1.826,1.826-1.826,4.785,0,6.611c0.913,0.913,2.109,1.369,3.306,1.369s2.393-0.456,3.306-1.369  l22.502-22.502l22.501,22.502c0.913,0.913,2.109,1.369,3.306,1.369s2.393-0.456,3.306-1.369  C61.42,57.647,61.42,54.687,59.595,52.861z"}))},za=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2"},a.a.createElement("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),a.a.createElement("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}))},Da=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2"},a.a.createElement("circle",{cx:"6",cy:"6",r:"3"}),a.a.createElement("circle",{cx:"6",cy:"18",r:"3"}),a.a.createElement("line",{x1:"20",y1:"4",x2:"8.12",y2:"15.88"}),a.a.createElement("line",{x1:"14.47",y1:"14.48",x2:"20",y2:"20"}),a.a.createElement("line",{x1:"8.12",y1:"8.12",x2:"12",y2:"12"}))},Ra=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2"},a.a.createElement("polyline",{points:"3 6 5 6 21 6"}),a.a.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),a.a.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),a.a.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))},Fa=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:18*n/24,viewBox:"0 0 24 18",fill:"none",stroke:"none",strokeWidth:"2"},a.a.createElement("g",{transform:"translate(-678.000000, -2727.000000)"},a.a.createElement("g",{transform:"translate(100.000000, 2626.000000)"},a.a.createElement("g",{transform:"translate(578.000000, 98.000000)"},a.a.createElement("g",{transform:"translate(0.000000, 0.000000)"},a.a.createElement("polygon",{points:"0 0 24 0 24 24 0 24"}),a.a.createElement("path",{d:"M15,8 C14.45,8 14,8.45 14,9 L14,11 L12,11 C11.45,11 11,11.45 11,12 C11,12.55 11.45,13 12,13 L14,13 L14,15 C14,15.55 14.45,16 15,16 C15.55,16 16,15.55 16,15 L16,13 L18,13 C18.55,13 19,12.55 19,12 C19,11.45 18.55,11 18,11 L16,11 L16,9 C16,8.45 15.55,8 15,8 Z M2,12 C2,9.42 3.4,7.17 5.48,5.96 C5.8,5.77 6.01,5.45 6.01,5.08 C6.01,4.31 5.17,3.83 4.5,4.22 C1.82,5.78 0,8.68 0,12 C0,15.32 1.82,18.22 4.5,19.78 C5.17,20.17 6.01,19.69 6.01,18.92 C6.01,18.55 5.8,18.23 5.48,18.04 C3.4,16.83 2,14.58 2,12 Z M15,3 C10.04,3 6,7.04 6,12 C6,16.96 10.04,21 15,21 C19.96,21 24,16.96 24,12 C24,7.04 19.96,3 15,3 Z M15,19 C11.14,19 8,15.86 8,12 C8,8.14 11.14,5 15,5 C18.86,5 22,8.14 22,12 C22,15.86 18.86,19 15,19 Z",fill:r}))))))},Ha=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},a.a.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),a.a.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))},_a=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,fill:r,viewBox:"0 0 512.001 512.001"},a.a.createElement("g",null,a.a.createElement("g",null,a.a.createElement("g",null,a.a.createElement("path",{d:"M481,371c11.046,0,20-8.954,20-20v-92c0-33.084-26.916-60-60-60h-39v-79c0-44.112-35.888-80-80-80h-47.533 c-7.739-23.749-29.864-40-55.16-40h-25.614c-25.296,0-47.421,16.251-55.16,40H91c-44.112,0-80,35.888-80,80v312 c0,44.112,35.888,80,80,80h88c11.046,0,20-8.954,20-20c0-11.046-8.954-20-20-20H91c-22.056,0-40-17.944-40-40V120 c0-22.056,17.944-40,40-40h2v59c0,11.046,8.954,20,20,20h189c11.046,0,20-8.954,20-20V80c22.056,0,40,17.944,40,40v79h-65.007 C263.914,199,237,225.913,237,258.993v193.015c0,33.08,26.916,59.993,60.01,59.993L441,511.926c33.084,0,60-26.913,60-59.992 c0-11.046-8.954-20-20-20c-11.046,0-20,8.954-20,20c0,11.024-8.972,19.992-20.01,19.992L297,472c-11.028,0-20-8.969-20-19.993 V258.993c0-11.024,8.969-19.993,19.993-19.993H441c11.028,0,20,8.972,20,20v92C461,362.046,469.955,371,481,371z M282,119H133V80 h21c9.177,0,17.177-6.246,19.403-15.149l2.798-11.194C178.211,45.616,185.404,40,193.693,40h25.614 c8.289,0,15.481,5.616,17.492,13.657l2.798,11.194C241.823,73.754,249.823,80,259,80h23V119z"}),a.a.createElement("path",{d:"M401,279h-64c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h64c11.046,0,20-8.954,20-20 C421,287.954,412.047,279,401,279z"}),a.a.createElement("path",{d:"M401,349h-64c-11.046,0-20,8.954-20,20c0,11.046,8.954,20,20,20h64c11.046,0,20-8.954,20-20 C421,357.954,412.047,349,401,349z"})))))},Wa=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"#ffb100":i;return a.a.createElement("svg",{width:n,height:n,fill:r,viewBox:"0 0 512 512"},a.a.createElement("path",{d:"M395,512a73.14,73.14,0,0,1-73.14-73.14V73.14a73.14,73.14,0,1,1,146.29,0V438.86A73.14,73.14,0,0,1,395,512Z"}),a.a.createElement("path",{d:"M117,512a73.14,73.14,0,0,1-73.14-73.14V73.14a73.14,73.14,0,1,1,146.29,0V438.86A73.14,73.14,0,0,1,117,512Z"}))},Ua=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"#008000":i;return a.a.createElement("svg",{width:n,height:n,fill:r,viewBox:"0 0 512 512"},a.a.createElement("path",{d:"M60.54,512c-17.06,0-30.43-13.86-30.43-31.56V31.55C30.12,13.86,43.48,0,60.55,0A32.94,32.94,0,0,1,77,4.52L465.7,229c10.13,5.85,16.18,16,16.18,27s-6,21.2-16.18,27L77,507.48A32.92,32.92,0,0,1,60.55,512Z"}))},Va=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,viewBox:"0 0 512 512",fill:r},a.a.createElement("path",{d:"m431 481c0 11.046-8.954 20-20 20h-66c-11.046 0-20-8.954-20-20s8.954-20 20-20h66c11.046 0 20 8.954 20 20zm63.358-352.994-112.284-111.215c-7.848-7.773-20.511-7.713-28.284.135s-7.712 20.511.135 28.284l106.808 105.79h-285.733c-96.495 0-175 78.505-175 175s78.505 175 175 175h69c11.046 0 20-8.954 20-20s-8.954-20-20-20h-69c-74.439 0-135-60.561-135-135s60.561-135 135-135h284.836l-105.037 105.917c-7.778 7.843-7.725 20.506.118 28.284 3.9 3.868 8.992 5.799 14.083 5.799 5.146 0 10.292-1.975 14.202-5.917l111.225-112.157c11.332-11.332 17.573-26.4 17.573-42.426s-6.241-31.094-17.642-42.494z"}))},Ya=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2"},a.a.createElement("circle",{cx:"12",cy:"12",r:"3"}),a.a.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}))},Xa=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"#c53838":i;return a.a.createElement("svg",{width:n,height:n,fill:r,viewBox:"0 0 512 512"},a.a.createElement("path",{d:"M 65.249771,0 A 65.248738,65.376306 0 0 0 0.413662,58.057582 h -0.18732 v 1.884685 A 65.248738,65.376306 0 0 0 0,65.377342 65.248738,65.376306 0 0 0 0.226342,70.796781 V 441.18757 A 65.248738,65.376306 0 0 0 0,446.62268 a 65.248738,65.376306 0 0 0 0.226342,5.41161 v 2.88566 H 0.530738 A 65.248738,65.376306 0 0 0 65.249771,512 a 65.248738,65.376306 0 0 0 2.44297,-0.0468 H 444.31507 a 65.248738,65.376306 0 0 0 2.43514,0.0468 65.248738,65.376306 0 0 0 2.44297,-0.0468 h 0.56977 v -0.024 a 65.248738,65.376306 0 0 0 61.70628,-57.00966 h 0.0312 v -0.22662 a 65.248738,65.376306 0 0 0 0.49952,-8.07049 65.248738,65.376306 0 0 0 -0.49952,-8.01579 V 67.011775 a 65.248738,65.376306 0 0 0 0.0234,-1.634433 65.248738,65.376306 0 0 0 -0.0234,-1.681351 v -5.638409 h -0.38247 A 65.248738,65.376306 0 0 0 456.2645,0.77420532 V 0 H 446.40678 446.2741 65.374651 Z"}))},Ka=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,viewBox:"0 0 512 512",fill:r},a.a.createElement("path",{d:"m 81,481 c 0,11.046 8.954,20 20,20 h 66 c 11.046,0 20,-8.954 20,-20 0,-11.046 -8.954,-20 -20,-20 h -66 c -11.046,0 -20,8.954 -20,20 z M 17.642,128.006 129.926,16.791 c 7.848,-7.773 20.511,-7.713 28.284,0.135 7.773,7.848 7.712,20.511 -0.135,28.284 L 51.267,151 H 337 c 96.495,0 175,78.505 175,175 0,96.495 -78.505,175 -175,175 h -69 c -11.046,0 -20,-8.954 -20,-20 0,-11.046 8.954,-20 20,-20 h 69 c 74.439,0 135,-60.561 135,-135 0,-74.439 -60.561,-135 -135,-135 H 52.164 l 105.037,105.917 c 7.778,7.843 7.725,20.506 -0.118,28.284 -3.9,3.868 -8.992,5.799 -14.083,5.799 -5.146,0 -10.292,-1.975 -14.202,-5.917 L 17.573,212.926 C 6.241,201.594 0,186.526 0,170.5 0,154.474 6.241,139.406 17.642,128.006 Z"}))},Za=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2"},a.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),a.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),a.a.createElement("line",{x1:"11",y1:"8",x2:"11",y2:"14"}),a.a.createElement("line",{x1:"8",y1:"11",x2:"14",y2:"11"}))},Ga=function(e){var t=e.size,n=void 0===t?16:t,i=e.color,r=void 0===i?"gray":i;return a.a.createElement("svg",{width:n,height:n,viewBox:"0 0 24 24",fill:"none",stroke:r,strokeWidth:"2"},a.a.createElement("circle",{cx:"11",cy:"11",r:"8"}),a.a.createElement("line",{x1:"21",y1:"21",x2:"16.65",y2:"16.65"}),a.a.createElement("line",{x1:"8",y1:"11",x2:"14",y2:"11"}))};function qa(){var e=Object(Q.a)(["\n  background: none;\n  border: none;\n\n  font-size: 1.2em;\n\n  min-width: 75px;\n  min-height: 60px;\n\n  &:disabled {\n    & > svg {\n      fill: #bfbfbf;\n    }\n  }\n"]);return qa=function(){return e},e}function Ja(){var e=Object(Q.a)(["\n  position: absolute;\n  bottom: 16px;\n  left: 50%;\n  transform: translate(-50%, 0);\n\n  background: rgb(224, 224, 224);\n  background: linear-gradient(\n    0deg,\n    rgba(224, 224, 224, 1) 0%,\n    rgba(255, 255, 255, 1) 100%\n  );\n\n  border: 1px solid gray;\n  border-radius: 16px;\n\n  z-index: 2;\n\n  & > button {\n    border-right: 1px solid gray;\n    &:last-child {\n      border-right: none;\n    }\n  }\n"]);return Ja=function(){return e},e}var Qa=$.a.div(Ja()),$a=$.a.button.attrs((function(e){var t=Object.assign({},e);return Object(c.a)(Object(c.a)({},t),{},{type:"button"})}))(qa()),er=function(e){var t=e.state,n=e.handleClickStart,i=e.handleClickPause,r=e.handleClickStop;return a.a.createElement(Qa,{id:"simulation-control-buttons"},a.a.createElement($a,{onClick:n,disabled:"started"===t,"data-for":"tooltip","data-tip":"Start simulation"},a.a.createElement(Ua,null)),a.a.createElement($a,{onClick:i,disabled:"paused"===t||"stopped"===t,"data-for":"tooltip","data-tip":"Pause simulation"},a.a.createElement(Wa,null)),a.a.createElement($a,{onClick:r,disabled:"stopped"===t,"data-for":"tooltip","data-tip":"Stop simulation"},a.a.createElement(Xa,null)))};function tr(){var e=Object(Q.a)(["\n  width: 60vw;\n  height: 80vh;\n\n  max-width: 600px;\n  max-height: 800px;\n\n  background: white;\n\n  border: 1px solid black;\n  border-radius: 25px;\n\n  padding: 16px;\n\n  z-index: 4;\n"]);return tr=function(){return e},e}function nr(){var e=Object(Q.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n\n  z-index: 3;\n\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  width: 100vw;\n  height: 100vh;\n\n  background: rgba(0, 0, 0, 0.75);\n"]);return nr=function(){return e},e}var ir=$.a.div(nr()),ar=$.a.div(tr()),rr=function(e){var t=e.children;return a.a.createElement(ir,null,a.a.createElement(ar,null,t))},or=n(119);function cr(){var e=Object(Q.a)(["\n  position: absolute;\n\n  flex-shrink: 0;\n\n  border: 1px solid gray;\n  border-radius: 25px;\n  width: 50px;\n  height: 50px;\n\n  ","\n\n  background: none;\n\n  :hover {\n    background: rgba(0, 0, 0, 0.05);\n    cursor: pointer;\n  }\n"]);return cr=function(){return e},e}function lr(){var e=Object(Q.a)(["\n  margin-top: 32px;\n"]);return lr=function(){return e},e}function ur(){var e=Object(Q.a)(["\n  flex-grow: 1;\n  font-size: 1.2em;\n\n  margin: 0;\n\n  align-self: center;\n  text-align: center;\n"]);return ur=function(){return e},e}function sr(){var e=Object(Q.a)(["\n  flex-grow: 1;\n  font-size: 1.5em;\n\n  margin: 0;\n\n  align-self: center;\n  text-align: center;\n"]);return sr=function(){return e},e}function dr(){var e=Object(Q.a)(["\n  position: relative;\n\n  display: flex;\n  flex-direction: row;\n  justify-content: center;\n  align-content: space-between;\n\n  height: 50px;\n"]);return dr=function(){return e},e}var fr=$.a.div(dr()),pr=$.a.h1(sr()),mr=$.a.h2(ur()),gr=$.a.div(lr()),hr=$.a.button(cr(),(function(e){return e.left?"left: 0;":"right: 0;"}));function vr(){var e=Object(Q.a)(["\n  font-size: 0.8em;\n  color: #c80a0a;\n\n  background: white;\n\n  position: relative;\n  bottom: 0.7em;\n\n  width: max-content;\n  padding: 0 8px;\n  margin: -15px auto auto auto;\n  transform: translateY(15px);\n"]);return vr=function(){return e},e}function br(){var e=Object(Q.a)(["\n  display: flex;\n  flex-direction: column;\n  margin-top: 16px;\n\n  label {\n    font-size: 0.8em;\n    font-weight: bold;\n    text-transform: uppercase;\n    color: ",";\n\n    background: #eee;\n    border: 1px solid ",";\n    border-radius: 8px;\n\n    position: relative;\n    top: 0.8em;\n\n    width: max-content;\n    margin-left: 15px;\n    padding: 0 8px;\n  }\n\n  select,\n  input {\n    background: white;\n    border: 1px solid ",";\n    border-radius: 25px;\n\n    font-size: 1.2em;\n\n    padding: 10px 0 5px 16px;\n  }\n"]);return br=function(){return e},e}var yr=$.a.div(br(),(function(e){return e.error?"#710606":"inherit"}),(function(e){return e.error?"#c80a0a":"gray"}),(function(e){return e.error?"#c80a0a":"gray"})),Er=function(e){var t=e.field,n=e.name,i=e.label,r=e.componentType,o=e.type,c=e.innerRef,l=e.options,u=void 0===l?[]:l,s=e.step,d=e.min,f=e.max;switch(o){case"select":return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{htmlFor:n},i),a.a.createElement("select",Object.assign({id:t.name,ref:c},t),u.map((function(e){return a.a.createElement("option",{value:e.value,key:e.value},e.label)}))));case"number":return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{htmlFor:n},i),a.a.createElement("input",Object.assign({id:t.name,ref:c},t,{step:s,min:d,max:f,type:"number"})));case"text":return a.a.createElement(a.a.Fragment,null,a.a.createElement("label",{htmlFor:n},i),a.a.createElement("input",Object.assign({id:t.name,ref:c},t,{type:"text"})));default:throw new Error("[logossim] Invalid configuration type for ".concat(r,": ").concat(o))}},kr=$.a.div(vr()),Or=function(e){var t=e.field.name,n=e.form.errors[t];return a.a.createElement(yr,{error:n},a.a.createElement(Er,e),n&&a.a.createElement(kr,null,n))};function xr(){var e=Object(Q.a)(["\n  border: 1px dashed var(--value-error);\n  border-radius: 5px;\n  width: 30px;\n  height: 30px;\n"]);return xr=function(){return e},e}var jr={registerListener:function(){},getCanvas:function(){},getPortCoords:function(){return{getWidth:function(){},getHeight:function(){},getTopLeft:function(){}}},getModel:function(){return{isLocked:function(){return!1}}}},Pr=function(e,t){return t?"":e?"Check form errors":"Drag me!"},wr=$.a.div(xr()),Sr=function(e){var t=e.component,n=t.type,i=t.Widget,r=t.Model,o=e.configurations,c=e.handleClose,l=e.error,u=e.disabled;return a.a.createElement("div",{draggable:!l&&!u,onDragStart:function(e){e.dataTransfer.setDragImage(e.currentTarget.children[0],0,0),e.dataTransfer.setData("component",JSON.stringify({type:n,configurations:o})),requestAnimationFrame((function(){h.a.hide(),c()}))},"data-for":"tooltip","data-tip":Pr(l,u),"data-place":"bottom"},l?a.a.createElement(wr,null):a.a.createElement(i,{engine:jr,model:new r(o,n)}))};function Cr(){var e=Object(Q.a)(["\n  border: none;\n  border-radius: 5px;\n  background: #07d26b;\n\n  color: white;\n  font-size: 1.2em;\n\n  width: 100%;\n  padding: 5px 20px;\n  margin: 5px;\n\n  :disabled {\n    background: #d22307;\n    cursor: not-allowed;\n  }\n"]);return Cr=function(){return e},e}function Lr(){var e=Object(Q.a)(["\n  font-size: 0.8em;\n  font-style: italic;\n  align-self: center;\n  text-align: right;\n  margin-right: 10px;\n"]);return Lr=function(){return e},e}function Mr(){var e=Object(Q.a)(["\n  display: flex;\n"]);return Mr=function(){return e},e}function Ar(){var e=Object(Q.a)(["\n  height: 375px;\n  overflow-y: auto;\n"]);return Ar=function(){return e},e}function Tr(){var e=Object(Q.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n\n  height: 200px;\n  margin-bottom: 32px;\n\n  box-shadow: ",";\n\n  background-image: ",";\n  background-size: 45px 45px;\n  border-radius: 25px;\n\n  overflow: hidden;\n"]);return Tr=function(){return e},e}var Br=$.a.div(Tr(),(function(e){return"inset 0 0 20px rgba(".concat(e.error?255:0,", 0, 0, 0.3)")}),(function(e){return"linear-gradient(\n      to right,\n      rgba(".concat(e.error?255:0,", 0, 0, 0.1) 1px,\n      transparent 1px,\n      transparent 15px,\n      rgba(").concat(e.error?255:0,", 0, 0, 0.05) 15px,\n      transparent 16px,\n      transparent 30px,\n      rgba(").concat(e.error?255:0,", 0, 0, 0.05) 30px,\n      transparent 31px\n    ),\n    linear-gradient(\n      to bottom,\n      rgba(").concat(e.error?255:0,", 0, 0, 0.1) 1px,\n      transparent 1px,\n      transparent 15px,\n      rgba(").concat(e.error?255:0,", 0, 0, 0.05) 15px,\n      transparent 16px,\n      transparent 30px,\n      rgba(").concat(e.error?255:0,", 0, 0, 0.05) 30px,\n      transparent 31px\n    )")})),Ir=$.a.div(Ar()),Nr=$.a.div(Mr()),zr=$.a.span(Lr()),Dr=$.a.button.attrs((function(e){var t=Object.assign({},e);return Object(c.a)(Object(c.a)({},t),{},{type:"submit"})}))(Cr()),Rr=function(e){return Object.fromEntries(e.configurations.map((function(e){return[e.name,e.default]})))},Fr=function(e){var t=e.editMode,n=e.component,r=e.handleClose,o=e.handleBack,c=e.handleSubmit,l=Object(i.useRef)(),u=Object(i.useRef)();return Object(i.useEffect)((function(){l.current?l.current.focus():u.current.focus()})),Object(i.useEffect)(h.a.rebuild),a.a.createElement(a.a.Fragment,null,a.a.createElement(fr,null,!t&&a.a.createElement(hr,{left:!0,onClick:o,"data-for":"tooltip","data-tip":"Go back...","data-place":"right"},a.a.createElement(Ta,null)),a.a.createElement(pr,null,t?"Edit":"Configure"," component"),a.a.createElement(hr,{right:!0,onClick:r,"data-for":"tooltip","data-tip":"Close","data-place":"left"},a.a.createElement(Na,null))),a.a.createElement(gr,null,a.a.createElement(or.c,{initialValues:Rr(n),onSubmit:function(e){c(null,{type:n.type,configurations:e}),r()}},(function(e){var i=e.values,o=e.isValid;return a.a.createElement(or.b,null,a.a.createElement(Br,{error:!o},a.a.createElement(Sr,{component:n,configurations:i,handleClose:r,error:!o,disabled:t})),a.a.createElement(Ir,{autoComplete:"off"},n.configurations.map((function(e,t){return a.a.createElement(or.a,Object.assign({key:e.name,component:Or,innerRef:0===t?l:null},e,{validate:e.validate?function(t){return e.validate(t,i)}:null}))}))),a.a.createElement(Nr,null,!t&&a.a.createElement(zr,null,"(hint: you can also drag the component)"),a.a.createElement(Dr,{disabled:!o,ref:u},function(e,t){return e?t?"Edit component":"Add to circuit":"Check form errors"}(o,t))))}))))},Hr=function(e){var t=e.isOpen,n=e.components,r=e.component,o=e.handleClose,l=e.handleComponentEdit,u=Object(i.useCallback)((function(e){return function(e,t){"Escape"===e.code&&t()}(e,o)}),[o]);if(Object(i.useEffect)((function(){return window.addEventListener("keydown",u),function(){return window.removeEventListener("keydown",u)}}),[u]),!t)return null;var s=n.find((function(e){return e.type===r.options.type})),d=Object(c.a)(Object(c.a)({},s),{},{configurations:s.configurations.map((function(e){return Object(c.a)(Object(c.a)({},e),{},{default:r.configurations[e.name]})}))});return a.a.createElement(rr,null,a.a.createElement(Fr,{editMode:!0,handleClose:o,handleSubmit:function(e,t){var n=t.configurations;return l(r,n)},component:d}))};function _r(){var e=Object(Q.a)(["\n  margin-right: 16px;\n"]);return _r=function(){return e},e}function Wr(){var e=Object(Q.a)(["\n  font-weight: normal;\n  font-size: 1.2em;\n"]);return Wr=function(){return e},e}function Ur(){var e=Object(Q.a)(["\n  display: flex;\n  align-items: center;\n\n  padding: 8px;\n\n  background: rgba(0, 0, 0, 0.05);\n  border: 1px solid gray;\n  border-radius: 5px;\n\n  :hover {\n    background: rgba(0, 0, 0, 0.1);\n    border-style: dashed;\n  }\n"]);return Ur=function(){return e},e}function Vr(){var e=Object(Q.a)(["\n  display: ",";\n  grid-template-columns: 1fr 1fr;\n  grid-gap: 8px;\n"]);return Vr=function(){return e},e}function Yr(){var e=Object(Q.a)(["\n  background: none;\n  border: none;\n  width: 50px;\n\n  transform: ",";\n"]);return Yr=function(){return e},e}function Xr(){var e=Object(Q.a)(["\n  flex-grow: 1;\n  align-self: center;\n\n  margin: 16px;\n  border-top: 1px solid black;\n"]);return Xr=function(){return e},e}function Kr(){var e=Object(Q.a)(["\n  font-weight: bold;\n  font-size: 1.3em;\n"]);return Kr=function(){return e},e}function Zr(){var e=Object(Q.a)(["\n  display: flex;\n  justify-content: space-between;\n"]);return Zr=function(){return e},e}function Gr(){var e=Object(Q.a)(["\n  margin-bottom: 32px;\n"]);return Gr=function(){return e},e}var qr=$.a.div(Gr()),Jr=$.a.div(Zr()),Qr=$.a.div(Kr()),$r=$.a.hr(Xr()),eo=$.a.button(Yr(),(function(e){return e.isOpen?"rotate(180deg)":"none"})),to=$.a.div(Vr(),(function(e){return e.isOpen?"grid":"none"})),no=$.a.button(Ur()),io=$.a.h2(Wr()),ao=$.a.div(_r()),ro=function(e){var t=e.name,n=e.components,r=e.handleComponentSelect,o=Object(i.useState)(!0),c=Object(d.a)(o,2),l=c[0],u=c[1];return a.a.createElement(qr,null,a.a.createElement(Jr,{onClick:function(){return u(!l)}},a.a.createElement(Qr,null,t),a.a.createElement($r,null),a.a.createElement(eo,{left:!0,isOpen:l,onClick:function(){return u(!l)}},a.a.createElement(Ba,null))),a.a.createElement(to,{isOpen:l},n.map((function(e){return a.a.createElement(no,{onClick:function(){return r(e)},key:e.name,"data-for":"tooltip","data-tip":e.description},a.a.createElement(ao,null,a.a.createElement(e.Icon,null)),a.a.createElement(io,null,e.name))}))))};function oo(){var e=Object(Q.a)(["\n  padding-right: 16px;\n  max-height: calc(min(800px, 80vh) - 130px);\n  overflow-y: auto;\n"]);return oo=function(){return e},e}function co(){var e=Object(Q.a)(["\n  flex-grow: 1;\n\n  padding: 10px;\n  margin-right: 60px;\n  font-size: 1.5em;\n\n  border-radius: 25px;\n  border: 1px solid gray;\n\n  ::placeholder {\n    font-weight: 300;\n    color: #cfcfcf;\n  }\n"]);return co=function(){return e},e}var lo=$.a.input(co()),uo=$.a.div(oo()),so=function(e){var t=e.groups,n=e.handleComponentSelect,r=e.handleClose;Object(i.useEffect)(h.a.rebuild);var o=Object(i.useState)(t),l=Object(d.a)(o,2),u=l[0],s=l[1],f=Object(i.useState)(""),p=Object(d.a)(f,2),m=p[0],g=p[1];return a.a.createElement(a.a.Fragment,null,a.a.createElement(fr,null,a.a.createElement(lo,{autoFocus:!0,placeholder:"Search components...",value:m,onChange:function(e){return function(e){if(g(e),e){var n=new RegExp("".concat(e,".*"),"i"),i=t.map((function(e){return e.components.some((function(e){return e.name.match(n)}))?Object(c.a)(Object(c.a)({},e),{},{components:e.components.filter((function(e){return e.name.match(n)}))}):null})).filter((function(e){return null!=e}));s(i)}else s(t)}(e.target.value)},onKeyDown:function(e){return function(e){"Escape"===e&&(g(""),s(t)),"Enter"===e&&m&&u.length>0&&u[0].components.length>0&&n(u[0].components[0])}(e.key)}}),a.a.createElement(hr,{right:!0,onClick:r,"data-for":"tooltip","data-tip":"Close","data-place":"left"},a.a.createElement(Na,null))),a.a.createElement(gr,null,a.a.createElement(uo,null,u.map((function(e){var t=e.name,i=e.components;return a.a.createElement(ro,{name:t,components:i,handleComponentSelect:n,key:t})})))))},fo=function(e){var t=e.isOpen,n=e.groups,r=e.handleClose,o=e.handleComponentDrop,c=Object(i.useState)(null),l=Object(d.a)(c,2),u=l[0],s=l[1],f=Object(i.useCallback)((function(e){return function(e,t){var n=e.code,i=t.handleClose,a=t.setSelectedComponent;"Escape"===n&&(i(),a(null))}(e,{handleClose:r,setSelectedComponent:s})}),[r]);return Object(i.useEffect)((function(){return window.addEventListener("keydown",f),function(){return window.removeEventListener("keydown",f)}}),[f]),t?a.a.createElement(rr,null,u?a.a.createElement(Fr,{handleClose:function(){r(),s(null)},handleSubmit:o,handleBack:function(){return s(null)},component:u}):a.a.createElement(so,{handleClose:r,handleComponentSelect:s,groups:n})):null};function po(){var e=Object(Q.a)(["\n  display: inline-flex;\n  align-items: center;\n\n  height: ","px;\n  padding: 0 ","px;\n  margin: 2px ","px;\n\n  font-size: ","px;\n  font-family: monospace;\n  color: #000000c4;\n\n  background: #ececec;\n  border-radius: 4px;\n  border: 1px solid #ffffff17;\n  box-shadow: inset 0 0 ","px #0000000a;\n"]);return po=function(){return e},e}var mo=$.a.span(po(),(function(e){return e.size}),(function(e){return e.size/4}),(function(e){return e.size/8}),(function(e){return e.size/2}),(function(e){return e.size/4})),go=function(e){var t=e.children,n=e.size,i=void 0===n?16:n;return a.a.createElement(mo,{size:i},t)};function ho(){var e=Object(Q.a)(["\n  display: flex;\n  align-items: center;\n\n  width: 16px;\n  height: 16px;\n  margin-right: 16px;\n"]);return ho=function(){return e},e}var vo=$.a.div(ho());function bo(){var e=Object(Q.a)(["\n  display: flex;\n  flex: 1;\n  justify-content: flex-end;\n  margin-left: 8px;\n"]);return bo=function(){return e},e}var yo=$.a.div(bo()),Eo=function(e){var t=e.duplicateSelected,n=e.cutSelected,i=e.copySelected,r=e.pasteSelected,o=e.deleteSelected,c=e.undo,l=e.redo,u=e.zoomIn,s=e.zoomOut,d=e.configureComponent;return a.a.createElement(G.Menu,{id:"component"},a.a.createElement(G.Item,{onClick:t},a.a.createElement(vo,null,a.a.createElement(Fa,null)),"Duplicate",a.a.createElement(yo,null,a.a.createElement(go,null,"CTRL"),a.a.createElement(go,null,"D"))),a.a.createElement(G.Item,{onClick:n},a.a.createElement(vo,null,a.a.createElement(Da,null)),"Cut",a.a.createElement(yo,null,a.a.createElement(go,null,"CTRL"),a.a.createElement(go,null,"X"))),a.a.createElement(G.Item,{onClick:i},a.a.createElement(vo,null,a.a.createElement(za,null)),"Copy",a.a.createElement(yo,null,a.a.createElement(go,null,"CTRL"),a.a.createElement(go,null,"C"))),a.a.createElement(G.Item,{onClick:r},a.a.createElement(vo,null,a.a.createElement(_a,null)),"Paste",a.a.createElement(yo,null,a.a.createElement(go,null,"CTRL"),a.a.createElement(go,null,"V"))),a.a.createElement(G.Item,{onClick:o},a.a.createElement(vo,null,a.a.createElement(Ra,null)),"Delete",a.a.createElement(yo,null,a.a.createElement(go,null,"Delete"))),a.a.createElement(G.Separator,null),a.a.createElement(G.Item,{onClick:u},a.a.createElement(vo,null,a.a.createElement(Za,null)),"Zoom in"),a.a.createElement(G.Item,{onClick:s},a.a.createElement(vo,null,a.a.createElement(Ga,null)),"Zoom out"),a.a.createElement(G.Separator,null),a.a.createElement(G.Item,{onClick:c},a.a.createElement(vo,null,a.a.createElement(Ka,null)),"Undo",a.a.createElement(yo,null,a.a.createElement(go,null,"CTRL"),a.a.createElement(go,null,"Z"))),a.a.createElement(G.Item,{onClick:l},a.a.createElement(vo,null,a.a.createElement(Va,null)),"Redo",a.a.createElement(yo,null,a.a.createElement(go,null,"CTRL"),a.a.createElement(go,null,"SHIFT"),a.a.createElement(go,null,"Z"))),a.a.createElement(G.Separator,null),a.a.createElement(G.Item,{onClick:function(e){var t=e.props;return d(t)}},a.a.createElement(vo,null,a.a.createElement(Ya,null)),"Edit configurations...",a.a.createElement(yo,null,a.a.createElement(go,null,"CTRL"),a.a.createElement(go,null,"E"))))},ko=function(e){var t=e.pasteSelected,n=e.undo,i=e.redo,r=e.zoomIn,o=e.zoomOut;return a.a.createElement(G.Menu,{id:"diagram"},a.a.createElement(G.Item,{onClick:t},a.a.createElement(vo,null,a.a.createElement(_a,null)),"Paste",a.a.createElement(yo,null,a.a.createElement(go,null,"CTRL"),a.a.createElement(go,null,"V"))),a.a.createElement(G.Separator,null),a.a.createElement(G.Item,{onClick:r},a.a.createElement(vo,null,a.a.createElement(Za,null)),"Zoom in"),a.a.createElement(G.Item,{onClick:o},a.a.createElement(vo,null,a.a.createElement(Ga,null)),"Zoom out"),a.a.createElement(G.Separator,null),a.a.createElement(G.Item,{onClick:n},a.a.createElement(vo,null,a.a.createElement(Ka,null)),"Undo",a.a.createElement(yo,null,a.a.createElement(go,null,"CTRL"),a.a.createElement(go,null,"Z"))),a.a.createElement(G.Item,{onClick:i},a.a.createElement(vo,null,a.a.createElement(Va,null)),"Redo",a.a.createElement(yo,null,a.a.createElement(go,null,"CTRL"),a.a.createElement(go,null,"SHIFT"),a.a.createElement(go,null,"Z"))))},Oo=(n(516),function(e){var t=e.duplicateSelected,n=e.cutSelected,i=e.copySelected,r=e.pasteSelected,o=e.deleteSelected,c=e.undo,l=e.redo,u=e.zoomIn,s=e.zoomOut,d=e.configureComponent;return a.a.createElement(a.a.Fragment,null,a.a.createElement(ko,{pasteSelected:r,undo:c,redo:l,zoomIn:u,zoomOut:s}),a.a.createElement(Eo,{duplicateSelected:t,cutSelected:n,copySelected:i,pasteSelected:r,deleteSelected:o,undo:c,redo:l,zoomIn:u,zoomOut:s,configureComponent:d}))}),xo=n(117),jo=n.n(xo),Po=n(265);function wo(){var e=Object(Q.a)(["\n  width: 80%;\n  margin: 24px;\n  border-color: white;\n"]);return wo=function(){return e},e}function So(){var e=Object(Q.a)(["\n  font-weight: bold;\n  font-size: 1.1em;\n  margin-top: -32px;\n"]);return So=function(){return e},e}var Co=$.a.span(So()),Lo=$.a.hr(wo()),Mo=function(e){var t=e.isOpen,n=e.handleClose,r=Object(i.useCallback)((function(e){return function(e,t){"Escape"===e.code&&t()}(e,n)}),[n]);return Object(i.useEffect)((function(){return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}}),[r]),t?a.a.createElement(rr,null,a.a.createElement(fr,null,a.a.createElement(pr,null,"About"),a.a.createElement(hr,{right:!0,onClick:n,"data-for":"tooltip","data-tip":"Close","data-place":"left"},a.a.createElement(Na,null))),a.a.createElement(gr,{style:{paddingTop:0,marginTop:16,overflowY:"auto",height:"calc(100% - 70px)",display:"flex",flexDirection:"column",alignItems:"center"}},a.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignItems:"center"}},a.a.createElement("img",{src:"".concat("https://renato-bohler.github.io/logossim","/social.png"),alt:"logossim's logo",style:{width:"75%"}}),a.a.createElement(Co,null,"Version ",Po.a)),a.a.createElement(Lo,null),a.a.createElement("div",{style:{margin:"0 32px"}},a.a.createElement("p",{style:{textAlign:"center"}},"If you want to know more about the project,"," ",a.a.createElement("a",{href:"https://github.com/renato-bohler/logossim",target:"_blank",rel:"noopener noreferrer"},"check us out on GitHub!")),a.a.createElement(jo.a,{type:"stargazers",namespace:"renato-bohler",repo:"logossim"}),a.a.createElement("p",{style:{textAlign:"center"}},a.a.createElement("strong",null,"You can help us")," make logossim better! If you know a little bit of web development, you can quite easily develop new components to the application.")),a.a.createElement(Lo,null),a.a.createElement("div",{style:{margin:"0 32px"}},a.a.createElement("p",{style:{textAlign:"center"}},"This is a project built by"," ",a.a.createElement("a",{href:"https://renato-bohler.github.io/",target:"_blank",rel:"noopener noreferrer"},"Renato B\xf6hler")," ","as an undegraduate thesis on Computer Engineering at"," ",a.a.createElement("a",{href:"http://www.utfpr.edu.br/",target:"_blank",rel:"noopener noreferrer"},"UTFPR"),".")))):null};function Ao(){var e=Object(Q.a)(["\n  padding: 8px;\n\n  border: 1px solid #5d2eb526;\n  border-radius: 8px;\n"]);return Ao=function(){return e},e}function To(){var e=Object(Q.a)(["\n  flex: 1;\n  margin: 8px 0;\n"]);return To=function(){return e},e}function Bo(){var e=Object(Q.a)(["\n  display: flex;\n"]);return Bo=function(){return e},e}var Io=$.a.div(Bo()),No=$.a.table(To()),zo=$.a.td(Ao()),Do=function(e){var t=e.isOpen,n=e.handleClose,r=Object(i.useCallback)((function(e){return function(e,t){"Escape"===e.code&&t()}(e,n)}),[n]);return Object(i.useEffect)((function(){return window.addEventListener("keydown",r),function(){return window.removeEventListener("keydown",r)}}),[r]),t?a.a.createElement(rr,null,a.a.createElement(fr,null,a.a.createElement(pr,null,"Keyboard shortcuts"),a.a.createElement(hr,{right:!0,onClick:n,"data-for":"tooltip","data-tip":"Close","data-place":"left"},a.a.createElement(Na,null))),a.a.createElement(gr,{style:{paddingTop:16,marginTop:16,overflowY:"auto",height:"calc(100% - 70px)"}},a.a.createElement("span",null,a.a.createElement("strong",null,"Note:")," some of the actions may have two shortcuts."),a.a.createElement(mr,{style:{marginTop:32}},"Circuit management"),a.a.createElement(Io,null,a.a.createElement(No,null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement(zo,null,"Save"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"S")),a.a.createElement(zo,null)),a.a.createElement("tr",null,a.a.createElement(zo,null,"Load"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"L")),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"SHIFT"),a.a.createElement(go,{size:32},"S"))),a.a.createElement("tr",null,a.a.createElement(zo,null,"Undo"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"Z")),a.a.createElement(zo,null)),a.a.createElement("tr",null,a.a.createElement(zo,null,"Redo"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"SHIFT"),a.a.createElement(go,{size:32},"Z")),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"Y")))))),a.a.createElement(mr,{style:{marginTop:32}},"Component management"),a.a.createElement(Io,null,a.a.createElement(No,null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement(zo,null,"Edit configurations"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"E"))),a.a.createElement("tr",null,a.a.createElement(zo,null,"Duplicate"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"D"))),a.a.createElement("tr",null,a.a.createElement(zo,null,"Delete"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"Delete"))),a.a.createElement("tr",null,a.a.createElement(zo,null,"Copy"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"C"))),a.a.createElement("tr",null,a.a.createElement(zo,null,"Paste"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"V"))),a.a.createElement("tr",null,a.a.createElement(zo,null,"Cut"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"X")))))),a.a.createElement(mr,{style:{marginTop:32}},"Simulation control"),a.a.createElement(Io,null,a.a.createElement(No,null,a.a.createElement("tbody",null,a.a.createElement("tr",null,a.a.createElement(zo,null,"Play"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"SPACE")),a.a.createElement(zo,null)),a.a.createElement("tr",null,a.a.createElement(zo,null,"Pause"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"SPACE")),a.a.createElement(zo,null)),a.a.createElement("tr",null,a.a.createElement(zo,null,"Stop"),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"CTRL"),a.a.createElement(go,{size:32},"SPACE")),a.a.createElement(zo,null,a.a.createElement(go,{size:32},"ESC")))))))):null};function Ro(){var e=Object(Q.a)(["\n  background: #ffffff80;\n  height: 5px;\n  border-radius: 5px;\n  align-self: flex-start;\n  width: 100%;\n\n  animation-name: ",";\n  animation-play-state: ",";\n  animation-duration: ","ms;\n  animation-delay: ","ms;\n  animation-timing-function: linear;\n"]);return Ro=function(){return e},e}function Fo(){var e=Object(Q.a)(["\n  0% {\n    width: 100%;\n  }\n  100% {\n    width: 0;\n  }\n"]);return Fo=function(){return e},e}function Ho(){var e=Object(Q.a)(["\n  display: flex;\n  flex-direction: column;\n  flex: 1;\n  width: 100%;\n  align-items: flex-start;\n  margin-top: 5px;\n  padding: 8px 16px;\n"]);return Ho=function(){return e},e}function _o(){var e=Object(Q.a)(["\n  position: absolute;\n  top: ",";\n  left: 50%;\n  transition: top ","ms;\n  transform: translateX(-50%);\n  overflow: hidden;\n\n  display: flex;\n  flex-direction: column;\n  justify-content: space-between;\n  align-items: center;\n\n  border-radius: 10px;\n  min-width: 300px;\n  min-height: 50px;\n\n  cursor: pointer;\n\n  background: ",";\n  color: white;\n  font-size: 14px;\n  font-weight: bold;\n  box-shadow: 0px 3px 5px -1px rgba(0, 0, 0, 0.2),\n    0px 6px 10px 0px rgba(0, 0, 0, 0.14),\n    0px 1px 18px 0px rgba(0, 0, 0, 0.12);\n  z-index: 2;\n"]);return _o=function(){return e},e}var Wo={error:"#f44336",warning:"#ff9800",info:"#2196f3",success:"#4caf50"},Uo=$.a.div(_o(),(function(e){return e.open?"5px":"-200px"}),500,(function(e){return Wo[e.type]})),Vo=$.a.span(Ho()),Yo=Object($.b)(Fo()),Xo=$.a.div(Ro(),Yo,(function(e){return e.paused?"paused":"running"}),(function(e){return e.timeout-250}),250),Ko=function(e){var t=e.open,n=e.handleClose,i=e.message,r=e.type,o=e.timeout;return a.a.createElement(Uo,{type:r,timeout:o,open:t,onClick:n},a.a.createElement(Vo,null,i.split("\n").map((function(e){return a.a.createElement("div",{key:e},e)}))),t&&a.a.createElement(Xo,{timeout:o}))};function Zo(){var e=Object(Q.a)(["\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  position: absolute;\n  top: 80px;\n  right: 20px;\n  background: white;\n  border: 1px solid #e5e5e5;\n  border-radius: 50%;\n  width: 30px;\n  height: 30px;\n  box-shadow: 0px 0px 12px 0px #6b6b6b;\n\n  svg {\n    transform: ",";\n    transition: 0.5s ease-in-out;\n  }\n"]);return Zo=function(){return e},e}function Go(){var e=Object(Q.a)(["\n  font-size: 14px;\n  color: #222;\n  padding: 16px;\n  border: 0;\n  background: transparent;\n  border-bottom: ",";\n\n  &:focus,\n  &:hover {\n    color: #6441a5;\n  }\n"]);return Go=function(){return e},e}function qo(){var e=Object(Q.a)(["\n  position: absolute;\n  top: 80px;\n  transform: translateX(calc(17px + -50%));\n\n  display: flex;\n  flex-direction: column;\n\n  background: rgba(255, 255, 255, 0.6);\n  border: 1px solid #6441a5;\n  border-radius: 10px;\n  padding: 3px;\n\n  z-index: 3;\n"]);return qo=function(){return e},e}function Jo(){var e=Object(Q.a)(["\n  background: rgba(255, 255, 255, 0.6);\n  border-radius: 50%;\n  border: 1px solid #6441a5;\n\n  width: 34px;\n  height: 34px;\n\n  margin: 5px;\n\n  color: #6441a5;\n  font-weight: bold;\n  font-size: 1.3em;\n\n  &:focus,\n  &:hover {\n    background: #6441a5;\n    border: 1px solid rgba(255, 255, 255, 0.6);\n    color: rgba(255, 255, 255, 0.6);\n  }\n"]);return Jo=function(){return e},e}function Qo(){var e=Object(Q.a)(["\n  display: none;\n"]);return Qo=function(){return e},e}function $o(){var e=Object(Q.a)(["\n  border: none;\n  border-radius: 5px;\n  background: ",";\n\n  color: white;\n  font-size: 1.2em;\n\n  min-width: 110px;\n  padding: 5px 20px;\n  margin: 5px;\n\n  transition: 0.5s ease-in-out;\n\n  &:disabled {\n    opacity: 10%;\n    cursor: not-allowed;\n    background: gray;\n  }\n"]);return $o=function(){return e},e}function ec(){var e=Object(Q.a)(["\n  display: flex;\n"]);return ec=function(){return e},e}function tc(){var e=Object(Q.a)(["\n  border: none;\n  background: none;\n  outline: none;\n  cursor: pointer;\n"]);return tc=function(){return e},e}function nc(){var e=Object(Q.a)(["\n  background: none;\n  border: none;\n  cursor: pointer;\n  outline: none;\n  font-size: 20px;\n"]);return nc=function(){return e},e}function ic(){var e=Object(Q.a)(["\n  display: flex;\n  align-items: center;\n  padding: 4px;\n  border: 1px solid\n    ",";\n  border-radius: 4px;\n  cursor: pointer;\n  &:hover {\n    border: 1px solid #e5e5e5;\n  }\n"]);return ic=function(){return e},e}function ac(){var e=Object(Q.a)(["\n  position: absolute;\n  top: 0;\n  left: 0;\n  width: 100%;\n\n  z-index: 2;\n\n  display: flex;\n  align-items: center;\n  justify-content: space-between;\n\n  background: white;\n  border-bottom: 1px solid #e5e5e5;\n  box-shadow: 0px -10px 20px 0px black;\n  padding: 12px;\n\n  transform: ",";\n  transition: 0.5s ease-in-out;\n"]);return ac=function(){return e},e}var rc=$.a.div(ac(),(function(e){return e.isHidden?"translateY(-100%)":"none"})),oc=$.a.div(ic(),(function(e){return e.isFocused?"#e5e5e5":"transparent"})),cc=$.a.input(nc()),lc=$.a.button(tc()),uc=$.a.div(ec()),sc=$.a.button.attrs((function(e){var t=Object.assign({},e);return Object(c.a)(Object(c.a)({},t),{},{type:"button"})}))($o(),(function(e){switch(e.color){case"green":return"#07d26b";case"orange":return"orange";default:return"gray"}})),dc=$.a.input(Qo()),fc=$.a.button.attrs((function(e){var t=Object.assign({},e);return Object(c.a)(Object(c.a)({},t),{},{type:"button"})}))(Jo()),pc=$.a.div(qo()),mc=$.a.button(Go(),(function(e){return e.last?"none":"1px solid #6441a5"})),gc=$.a.button(Zo(),(function(e){return e.isHidden?"rotate(180deg)":"none"})),hc=function(e){var t=e.circuitName,n=e.isCircuitNameFocused,r=e.handleChangeCircuitName,o=e.handleFocusCircuitName,c=e.handleBlurCircuitName,l=e.handleClickSave,u=e.handleFileLoad,s=e.handleClickKeyboardShortcuts,f=e.handleClickRedoTour,p=e.handleClickAbout,m=e.disabled,g=Object(i.useRef)(),h=Object(i.useRef)(),v=Object(i.useRef)(),b=Object(i.useRef)(),y=Object(i.useState)(!1),E=Object(d.a)(y,2),k=E[0],O=E[1],x=Object(i.useState)(!1),j=Object(d.a)(x,2),P=j[0],w=j[1],S=function(){return O(!k)},C=function(e){h.current&&!h.current.contains(e.target)&&g.current&&!g.current.contains(e.target)&&S()};return Object(i.useEffect)((function(){return document.addEventListener("mousedown",C),function(){return document.removeEventListener("mousedown",C)}})),a.a.createElement(rc,{isHidden:P},a.a.createElement(oc,{isFocused:n,"data-for":"tooltip","data-tip":"Rename your circuit...","data-place":"right"},a.a.createElement(cc,{ref:v,value:t,onChange:r,onFocus:o,onBlur:c,onKeyDown:function(e){if(v.current){var t=e.key;"Enter"!==t&&"Escape"!==t||v.current.blur()}},maxLength:50}),a.a.createElement(lc,{onClick:function(){v.current&&v.current.focus()}},a.a.createElement(Ha,null))),a.a.createElement(uc,null,a.a.createElement(fc,{id:"help-button",ref:g,onClick:S,"data-for":"tooltip","data-tip":"Get help...","data-place":"left"},a.a.createElement("span",null,"?")),k&&a.a.createElement(pc,{ref:h},a.a.createElement(mc,{onClick:function(){s(),S()}},"Keyboard shortcuts"),a.a.createElement(mc,{onClick:function(){w(!1),f(),S()}},"Redo the tour"),a.a.createElement(mc,{onClick:function(){p(),S()},last:!0},"About")),a.a.createElement("div",{id:"save-load-buttons"},a.a.createElement(sc,{color:"green",onClick:l,disabled:m,"data-for":"tooltip","data-tip":"Save circuit to file","data-place":"left"},"Save"),a.a.createElement(sc,{color:"orange",disabled:m,onClick:function(){b.current&&b.current.click()},"data-for":"tooltip","data-tip":"Load circuit from file...","data-place":"left"},"Load"),a.a.createElement(dc,{id:"file-input",ref:b,type:"file",accept:".lgsim",onChange:u}))),a.a.createElement(gc,{isHidden:P,onClick:function(){return w((function(e){return!e}))},"data-for":"tooltip","data-tip":P?"Show titlebar":"Hide titlebar","data-place":"left"},a.a.createElement(Ia,null)))},vc=n(54),bc=n(268),yc=n.n(bc),Ec=n(269),kc=n.n(Ec),Oc=n(270),xc=n.n(Oc),jc=n(271),Pc=n.n(jc),wc=180,Sc=135,Cc={id:"tour-circuit",name:"Logossim's tour circuit",createdAt:"2020-05-21T20:18:00.000Z",updatedAt:"2020-09-08T11:47:00.000Z",circuit:{id:"tour-circuit",locked:!1,offsetX:0,offsetY:0,zoom:100,gridSize:15,layers:[{id:"4d94cbed-1005-4dc6-b0e3-44d71dc14380",type:"diagram-links",isSvg:!0,transformed:!0,models:{"clock-out-link":{id:"clock-out-link",type:"link",selected:!1,source:"clock",sourcePort:"clock-port",target:"and",targetPort:"and-port-in0",points:[{id:"bb7c0935-a272-45ea-b47a-f9b79fa7fac3",type:"point",x:30,y:15},{id:"2f339615-1c6c-450c-9862-06742ed3893f",type:"point",x:60,y:15}],labels:[],bifurcations:[],bifurcationSource:null,bifurcationTarget:null,value:null,bits:1},"and-out-link":{id:"and-out-link",type:"link",selected:!1,source:"and",sourcePort:"and-port-out",target:null,targetPort:null,points:[{id:"e4916002-7182-4866-9df7-46473e7de8bc",type:"point",x:150,y:45},{id:"d677077d-9750-4831-be02-566294c988b1",type:"point",x:180,y:45}],labels:[],bifurcations:[],bifurcationSource:null,bifurcationTarget:null,value:null,bits:1},"button-out-link":{id:"button-out-link",type:"link",selected:!1,source:"button",sourcePort:"c241c69b-8e1a-45be-9982-4c96a537584f",target:"and",targetPort:"and-port-in1",points:[{id:"fbd656c6-6a36-4903-94b8-c715db34052d",type:"point",x:30,y:75},{id:"f70cce22-3d5d-4257-9916-b602da9a901b",type:"point",x:60,y:75}],labels:[],bifurcations:["not-in-link"],bifurcationSource:null,bifurcationTarget:null,value:null,bits:1},"not-out-link":{id:"not-out-link",type:"link",selected:!1,source:"not",sourcePort:"not-port-out",target:null,targetPort:null,points:[{id:"ba84ed0f-78ed-43c2-93d8-cf907b91b5fd",type:"point",x:120,y:120},{id:"78a6e161-97c3-4a31-a46c-244469ac75ff",type:"point",x:180,y:120}],labels:[],bifurcations:[],bifurcationSource:null,bifurcationTarget:null,value:null,bits:1},"not-in-link":{id:"not-in-link",type:"link",selected:!1,source:null,sourcePort:null,target:"not",targetPort:"589ba5d7-8c75-4c82-9068-a67c9b023f77",points:[{id:"fada8e3b-4b46-4a24-a7ec-e3ca3bab77ab",type:"point",x:45,y:75},{id:"f31e71e6-5d72-4f17-9af1-c23bfd257980",type:"point",x:45,y:120},{id:"2e747ee3-1c90-4e95-a40b-f221eb0710b3",type:"point",x:75,y:120}],labels:[],bifurcations:[],bifurcationSource:"button-out-link",bifurcationTarget:null,value:null,bits:1}}},{id:"9d30c1dd-e474-45b1-ad88-6b7739678ef3",type:"diagram-nodes",isSvg:!1,transformed:!0,models:{clock:{id:"clock",type:"Clock",selected:!1,x:0,y:0,ports:[{id:"clock-port",type:"Port",selected:!1,x:25,y:10,name:"out",parentNode:"clock",links:["clock-out-link"],input:!1,value:null,bits:1}],configurations:{FREQUENCY_HZ:.5,HIGH_DURATION:1,LOW_DURATION:1}},and:{id:"and",type:"And",selected:!1,x:60,y:0,ports:[{id:"and-port-in0",type:"Port",selected:!1,x:55,y:10,name:"in0",parentNode:"and",links:["clock-out-link"],input:!0,value:null,bits:1},{id:"and-port-in1",type:"Port",selected:!1,x:55,y:70,name:"in1",parentNode:"and",links:["button-out-link"],input:!0,value:null,bits:1},{id:"and-port-out",type:"Port",selected:!1,x:145,y:40,name:"out",parentNode:"and",links:["and-out-link"],input:!1,value:null,bits:1}],configurations:{DATA_BITS:"1",INPUT_PORTS_NUMBER:2}},button:{id:"button",type:"Button",selected:!1,x:0,y:60,ports:[{id:"c241c69b-8e1a-45be-9982-4c96a537584f",type:"Port",selected:!1,x:25,y:70,name:"out",parentNode:"button",links:["button-out-link"],input:!1,value:null,bits:1}],configurations:{}},not:{id:"not",type:"Not",selected:!1,x:75,y:105,ports:[{id:"589ba5d7-8c75-4c82-9068-a67c9b023f77",type:"Port",selected:!1,x:70,y:115,name:"in",parentNode:"not",links:["not-in-link"],input:!0,value:null,bits:1},{id:"not-port-out",type:"Port",selected:!1,x:115,y:115,name:"out",parentNode:"not",links:["not-out-link"],input:!1,value:null,bits:1}],configurations:{DATA_BITS:"1"}}}}]}};function Lc(){var e=Object(Q.a)(["\n  display: flex;\n  justify-content: center;\n  align-items: center;\n\n  animation: "," 1s ease-in-out infinite;\n  background-color: ",";\n  border: 1px solid rgba(42, 8, 69, 0.7);\n  border-radius: 50%;\n\n  height: ","px;\n  width: ","px;\n"]);return Lc=function(){return e},e}function Mc(){var e=Object(Q.a)(["\n  0% {\n    transform: scale(1);\n  }\n\n  55% {\n    background-color: rgba(42, 8, 69, 0.5);\n    transform: scale(1.2);\n  }\n"]);return Mc=function(){return e},e}var Ac=Object($.b)(Mc()),Tc=$.a.span(Lc(),Ac,(function(e){return e.color}),(function(e){return e.size}),(function(e){return e.size})),Bc=a.a.forwardRef((function(e,t){return a.a.createElement(Tc,Object.assign({size:30,color:"rgba(100, 65, 165, 0.3)",ref:t},e),a.a.createElement(Tc,{size:20,color:"rgba(100, 65, 165, 0.5)"}))})),Ic={alignSelf:"center",borderRadius:25,boxShadow:"rgba(171, 171, 171, 0.38) 0px 13px 20px 0px",marginBottom:16},Nc=function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,e)).recenterTourCircuit=function(){var e=i.state.currentStep;i.props.run&&(e<3||(0,i.props.recenterCircuit)())},i.callback=function(e){var t=e.type,n=e.action,a=e.index,r=i.props,o=r.setTourRunning,c=r.loadCircuit,l=r.clearCircuit;t===vc.b.STEP_AFTER&&(2===a&&n===vc.a.NEXT&&c(),3===a&&n===vc.a.PREV&&l(),i.setState({currentStep:a+(n===vc.a.NEXT?1:-1)})),t!==vc.b.TOUR_END&&n!==vc.a.CLOSE||(l(),localStorage.setItem("tour-done",!0),o(!1),i.setState({currentStep:0}))},i.state={currentStep:0,steps:[{title:"Welcome!",content:a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("img",{src:"".concat("https://renato-bohler.github.io/logossim","/social.png"),alt:"logossim's logo",style:{width:300,height:158,alignSelf:"center"}}),a.a.createElement("p",null,"This is ",a.a.createElement("strong",null,"logossim"),": an open source digital logic simulator, built for the web and to be extensible."),a.a.createElement("p",null,"Would you like to take a quick tour?")),target:"body",placement:"center",showProgress:!1,disableOverlayClose:!1,locale:{skip:"No, thanks",next:"Yes, please!"}},{target:"#tour-circuit-area-wrapper",title:"This is the circuit workstation",content:a.a.createElement("p",null,"Here's where you are going to draw your circuits")},{target:"#component-select-button",title:"Adding components",content:a.a.createElement("span",null,a.a.createElement("p",null,"And you'll start by adding some components."),a.a.createElement("p",null,"You can do it by clicking on this button, then you'll see all available components, so you can create awesome circuits..."),a.a.createElement("p",null,a.a.createElement("strong",null,"Hint:")," use the",a.a.createElement(go,{size:24},"CTRL"),a.a.createElement(go,{size:24},"A")," shortcut.")),placement:"top"},{target:"#tour-circuit-wrapper",title:"Adding components",content:a.a.createElement("p",null,"... like this one, for example!"),spotlightPadding:30},{target:"#tour-circuit-wrapper",title:"Managing components",content:a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("p",null,"Notice that you can right click anywhere on the canvas to access some handy commands, like duplicate, undo & redo and component configuration editing."),a.a.createElement("img",{src:kc.a,alt:"Context menu example video",style:Object(c.a)(Object(c.a)({},Ic),{},{width:268,height:132})})),spotlightPadding:30},{target:'[data-linkid="clock-out-link"]',title:"Wiring components",content:a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("p",null,"To wire components together, you can drag a component's port onto another port."),a.a.createElement("img",{src:Pc.a,alt:"Wiring components example video",style:Object(c.a)(Object(c.a)({},Ic),{},{width:268,height:178})}),a.a.createElement("p",null,a.a.createElement("strong",null,"Oh! Important note:")," you can select a wire by clicking it, and delete it using the Delete key.")),placement:"top",spotlightPadding:45},{target:'[data-linkid="not-in-link"]',title:"Wiring components",content:a.a.createElement("span",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("p",null,"You can also drag a new wire from an existing wire."),a.a.createElement("img",{src:yc.a,alt:"Bifurcating wires example video",style:Object(c.a)(Object(c.a)({},Ic),{},{width:268,height:160})}),a.a.createElement("p",null,a.a.createElement("strong",null,"Another important note:")," you can leave the wire with a loose end and connect it afterwards.")),placement:"top",spotlightPadding:45},{target:"#simulation-control-buttons",title:"Simulation control",content:a.a.createElement("div",{style:{display:"flex",flexDirection:"column"}},a.a.createElement("p",null,"After wiring it all together, you just need to run the simulation to test your ideas!"),a.a.createElement("img",{src:xc.a,alt:"Simulation execution example video",style:Object(c.a)(Object(c.a)({},Ic),{},{width:254,height:194})}),a.a.createElement("p",null,"Useful shortcuts:"),a.a.createElement("ul",{style:{margin:0}},a.a.createElement("li",null,a.a.createElement("strong",null,"Play/pause:"),a.a.createElement(go,{size:24},"SPACE")),a.a.createElement("li",null,a.a.createElement("strong",null,"Stop:"),a.a.createElement(go,{size:24},"CTRL"),a.a.createElement(go,{size:24},"SPACE")))),placement:"top"},{target:"#help-button",title:"Still need help?",content:a.a.createElement("span",null,a.a.createElement("p",null,"In case you need any assistance in the future, come back to this help button. Here you'll find:"),a.a.createElement("ol",{style:{lineHeight:"200%"}},a.a.createElement("li",null,"All keyboard shortcuts"),a.a.createElement("li",null,"More about the project"),a.a.createElement("li",null,"And this tour, if you feel like doing it another time")))},{target:"#save-load-buttons",title:"By the way...",content:a.a.createElement("span",null,a.a.createElement("p",null,"After you've done your amazing circuit, don't forget that you can save it and reload it later!"),a.a.createElement("p",null,"Useful shortcuts:"),a.a.createElement("ul",{style:{margin:0}},a.a.createElement("li",null,a.a.createElement("strong",null,"Save:"),a.a.createElement(go,{size:24},"CTRL"),a.a.createElement(go,{size:24},"S")),a.a.createElement("li",null,a.a.createElement("strong",null,"Load:"),a.a.createElement(go,{size:24},"CTRL"),a.a.createElement(go,{size:24},"L"))))},{target:"body",title:"And that's all folks!",content:a.a.createElement("div",null,a.a.createElement("p",null,"If you want to know more about the project,"," ",a.a.createElement("a",{href:"https://github.com/renato-bohler/logossim",target:"_blank",rel:"noopener noreferrer"},"check us out on GitHub!")),a.a.createElement(jo.a,{type:"stargazers",namespace:"renato-bohler",repo:"logossim"}),a.a.createElement("p",null,a.a.createElement("strong",null,"You can help us")," make logossim better! If you know a little bit of web development, you can quite easily develop new components to the application.")),placement:"center",showProgress:!1,showSkipButton:!1,disableOverlayClose:!1}]},i}return Object(p.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("resize",this.recenterTourCircuit)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this.recenterTourCircuit)}},{key:"render",value:function(){var e=this.state,t=e.steps,n=e.currentStep,i=this.props.run;return a.a.createElement(a.a.Fragment,null,a.a.createElement(vc.c,{run:i,steps:t,stepIndex:n,continuous:!0,scrollToFirstStep:!0,showProgress:!0,showSkipButton:!0,disableOverlayClose:!0,styles:{tooltip:{borderRadius:10},tooltipContent:{fontSize:14,textAlign:"left"},buttonBack:{color:"black",fontSize:12},buttonNext:{background:"#6441a5",fontSize:12,borderRadius:5},buttonSkip:{color:"#6441a5",fontSize:12,border:"1px solid #6441a5",borderRadius:5}},locale:{back:"Back",close:"Close",last:"Got it!",next:"Next",open:"Open",skip:"Skip"},beaconComponent:Bc,callback:this.callback}),a.a.createElement("div",{style:{display:i?"block":"none",position:"absolute",width:.75*window.innerWidth,height:.5*window.innerHeight,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},id:"tour-circuit-area-wrapper"}),a.a.createElement("div",{style:{display:i?"block":"none",position:"absolute",width:wc,height:Sc,top:"50%",left:"50%",transform:"translate(-50%, -50%)"},id:"tour-circuit-wrapper"}))}}]),n}(i.Component),zc=(n(521),function(e){Object(m.a)(n,e);var t=Object(g.a)(n);function n(e){var i;return Object(f.a)(this,n),(i=t.call(this,e)).areShortcutsAllowed=function(){var e=i.state,t=e.isComponentSelectOpen,n=e.isComponentEditOpen,a=e.isHelpKeyboardOpen,r=e.isHelpAboutOpen,o=e.isCircuitNameFocused,c=e.isTourRunning;return!(t||n||a||r||o||c)},i.shortcutHandler=function(e){var t=e.ctrlKey,n=e.shiftKey,a=e.code;if(i.areShortcutsAllowed()){if(t&&"KeyA"===a){if(e.preventDefault(),!i.simulation.isStopped())return;i.showAddComponent()}if(t&&"KeyE"===a){if(e.preventDefault(),!i.simulation.isStopped())return;var r=i.diagram.getSelectedNodes();if(1!==r.length)return;var o=r[0];i.showEditComponent(o)}t||"Space"!==a||(e.preventDefault(),i.simulation.isRunning()?i.handleClickPause():i.handleClickStart()),(t&&"Space"===a||"Escape"===a)&&(e.preventDefault(),i.simulation.isStopped()||i.handleClickStop()),t&&!n&&"KeyS"===a&&(e.preventDefault(),i.handleClickSave()),(t&&"KeyL"===a||t&&n&&"KeyS"===a)&&(e.preventDefault(),i.handleClickLoad())}},i.isCircuitEmpty=function(e){return!e||0===Object.keys(e.layers[1].models).length},i.loadFile=function(e){i.setState({circuitName:e.name,circuitCreatedAt:e.createdAt}),i.diagram.load(e.circuit)},i.loadHandler=function(){var e=JSON.parse(localStorage.getItem("circuit-autosave"));i.isCircuitEmpty(null===e||void 0===e?void 0:e.circuit)?i.setState({isTourAvailable:!0}):window.confirm("Reload last unsaved circuit?")?i.loadFile(e):(i.setState({isTourAvailable:!0}),localStorage.removeItem("circuit-autosave"))},i.shouldWarnUnload=function(e,t){return!i.isCircuitEmpty(e)&&JSON.stringify(t.layers)!==JSON.stringify(e.layers)},i.unloadHandler=function(e){var t=JSON.parse(localStorage.getItem("last-saved-circuit")),n=i.generateFile();i.shouldWarnUnload(n.circuit,t.circuit)&&(i.simulation.isStopped()&&localStorage.setItem("circuit-autosave",JSON.stringify(n)),e.returnValue="You have unsaved changes. Sure you want to leave?")},i.generateFile=function(){var e=i.state,t=e.circuitName,n=e.circuitCreatedAt,a=i.diagram.serialize();return{id:a.id,name:t,createdAt:n||new Date,updatedAt:new Date,circuit:a}},i.autoSave=function(){var e=i.generateFile();"tour-circuit"!==e.circuit.id&&(i.isCircuitEmpty(e.circuit)||i.simulation.isStopped()&&localStorage.setItem("circuit-autosave",JSON.stringify(e)))},i.synchronizeSimulation=function(){var e=i.simulation.getDiff();Object.entries(e.components).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return i.diagram.synchronizeComponent(n,a)})),Object.entries(e.links).forEach((function(e){var t=Object(d.a)(e,2),n=t[0],a=t[1];return i.diagram.synchronizeLink(n,a)})),i.simulation.clearDiff(),i.diagram.repaint()},i.renderSimulation=function(){i.simulation.isRunning()&&(i.synchronizeSimulation(),requestAnimationFrame(i.renderSimulation))},i.handleCircuitNameChange=function(e){e.stopPropagation(),e.preventDefault(),i.setState({circuitName:e.target.value})},i.handleCircuitNameFocus=function(e){i.setState({isCircuitNameFocused:!0}),"Untitled circuit"===e.target.value&&e.target.select()},i.handleCircuitNameBlur=function(){return i.setState({isCircuitNameFocused:!1})},i.handleClickSave=function(){i.state.circuitCreatedAt||i.setState({circuitCreatedAt:new Date});var e=JSON.stringify(i.generateFile(),null,2),t=new Blob([e],{type:"application/json"}),n=i.state.circuitName.replace(/[/|\\:*?"<>]/g,"");localStorage.setItem("last-saved-circuit",e),wa.a.saveAs(t,"".concat(n,".lgsim"))},i.handleClickLoad=function(){return document.getElementById("file-input").click()},i.handleFileLoad=function(e){var t=e.target.files;if(1===t.length){var n=function(){return i.showSnackbar("Error loading circuit file:\n".concat(t[0].name))},a=new FileReader;a.onerror=n,a.onload=function(e){try{var t=JSON.parse(e.target.result);i.loadFile(t)}catch(a){n()}},a.readAsText(t.item(0))}},i.handleClickStart=function(){var e=JSON.stringify(i.diagram.serialize());localStorage.setItem("circuit-autosave",e),i.diagram.clearSelection(),i.diagram.setLocked(!0),i.simulation.start(i.diagram.getModel()),i.renderSimulation(),i.forceUpdate()},i.handleClickPause=function(){i.simulation.pause(),i.forceUpdate()},i.handleClickStop=Object(s.a)(u.a.mark((function e(){return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,i.simulation.stop();case 2:i.diagram.clearAllValues(),i.diagram.setLocked(!1),i.forceUpdate(),i.simulation.clearDiff();case 6:case"end":return e.stop()}}),e)}))),i.showAddComponent=function(){return i.setState({isComponentSelectOpen:!0})},i.hideAddComponent=function(){return i.setState({isComponentSelectOpen:!1})},i.showEditComponent=function(e){i.diagram.clearSelection(),i.setState({isComponentEditOpen:!0,componentEdit:e})},i.hideEditComponent=function(){return i.setState({isComponentEditOpen:!1,componentEdit:null})},i.setTourRunning=function(e){return i.setState({isTourRunning:e})},i.showHelpTour=function(){return i.setTourRunning(!0)},i.showHelpKeyboard=function(){return i.setState({isHelpKeyboardOpen:!0})},i.hideHelpKeyboard=function(){return i.setState({isHelpKeyboardOpen:!1})},i.showHelpAbout=function(){return i.setState({isHelpAboutOpen:!0})},i.hideHelpAbout=function(){return i.setState({isHelpAboutOpen:!1})},i.showSnackbar=function(){var e=Object(s.a)(u.a.mark((function e(t){var n,a,r,o=arguments;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(n=o.length>1&&void 0!==o[1]?o[1]:"error",a=i.state.snackbar,r=3e3+50*t.split(" ").length,!a.open){e.next=8;break}return clearTimeout(a.timeoutID),i.hideSnackbar(),e.next=8,new Promise((function(e){return setTimeout(e,500)}));case 8:i.setState({snackbar:{open:!0,message:t,type:n,timeout:r,timeoutID:setTimeout(i.hideSnackbar,r)}});case 9:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),i.hideSnackbar=function(){var e=i.state.snackbar;clearTimeout(e.timeoutID),i.setState((function(e){return{snackbar:Object(c.a)(Object(c.a)({},e.snackbar),{},{open:!1})}}))},i.handleLoadTourCircuit=function(){i.circuitBeforeTour=i.generateFile(),i.loadFile(Cc),i.handleCenterTourCircuitOffset()},i.handleUnloadTourCircuit=function(){i.circuitBeforeTour&&(i.loadFile(i.circuitBeforeTour),i.circuitBeforeTour=null)},i.handleCenterTourCircuitOffset=function(){i.diagram.getModel().setOffset((window.innerWidth-wc)/2,(window.innerHeight-Sc)/2),i.diagram.realignGrid(),i.diagram.repaint()},i.state={isComponentSelectOpen:!1,isComponentEditOpen:!1,isHelpKeyboardOpen:!1,isHelpAboutOpen:!1,componentEdit:null,isTourAvailable:!1,isTourRunning:!JSON.parse(localStorage.getItem("tour-done")),circuitName:"Untitled circuit",circuitCreatedAt:null,isCircuitNameFocused:!1,snackbar:{open:!1,message:"",type:"success",timeout:0,timeoutID:null}},i.diagram=new Me(xa,i.areShortcutsAllowed,i.showSnackbar),i.simulation=new X(xa),i}return Object(p.a)(n,[{key:"componentDidMount",value:function(){window.addEventListener("keydown",this.shortcutHandler),window.addEventListener("load",this.loadHandler),window.addEventListener("beforeunload",this.unloadHandler),this.autoSaveInterval=setInterval(this.autoSave,15e3)}},{key:"componentWillUnmount",value:function(){window.removeEventListener("keydown",this.shortcutHandler),window.addEventListener("load",this.loadHandler),window.removeEventListener("beforeunload",this.unloadHandler),clearInterval(this.autoSaveInterval)}},{key:"render",value:function(){var e=this.state,t=e.isComponentSelectOpen,n=e.isComponentEditOpen,i=e.isHelpKeyboardOpen,r=e.isHelpAboutOpen,o=e.componentEdit,c=e.isTourAvailable,l=e.isTourRunning,u=e.circuitName,s=e.isCircuitNameFocused,d=e.snackbar;return a.a.createElement(a.a.Fragment,null,a.a.createElement(hc,{circuitName:u,isCircuitNameFocused:s,handleChangeCircuitName:this.handleCircuitNameChange,handleFocusCircuitName:this.handleCircuitNameFocus,handleBlurCircuitName:this.handleCircuitNameBlur,handleClickSave:this.handleClickSave,handleFileLoad:this.handleFileLoad,handleClickKeyboardShortcuts:this.showHelpKeyboard,handleClickRedoTour:this.showHelpTour,handleClickAbout:this.showHelpAbout,disabled:!this.simulation.isStopped()}),a.a.createElement(er,{state:this.simulation.getState(),handleClickStart:this.handleClickStart,handleClickPause:this.handleClickPause,handleClickStop:this.handleClickStop}),a.a.createElement(Aa,{handleClick:this.showAddComponent,disabled:!this.simulation.isStopped()}),a.a.createElement(fo,{isOpen:t,groups:ja,handleClose:this.hideAddComponent,handleComponentDrop:this.diagram.handleComponentDrop}),a.a.createElement(Hr,{isOpen:n,components:xa,component:o,handleClose:this.hideEditComponent,handleComponentEdit:this.diagram.handleComponentEdit}),a.a.createElement(Do,{isOpen:i,handleClose:this.hideHelpKeyboard}),a.a.createElement(Mo,{isOpen:r,handleClose:this.hideHelpAbout}),c&&a.a.createElement(Nc,{run:l,setTourRunning:this.setTourRunning,loadCircuit:this.handleLoadTourCircuit,clearCircuit:this.handleUnloadTourCircuit,recenterCircuit:this.handleCenterTourCircuitOffset}),a.a.createElement(re,{engine:this.diagram}),a.a.createElement(Oo,{duplicateSelected:this.diagram.duplicateSelected,cutSelected:this.diagram.cutSelected,copySelected:this.diagram.copySelected,pasteSelected:this.diagram.pasteSelected,deleteSelected:this.diagram.deleteSelected,undo:this.diagram.undo,redo:this.diagram.redo,zoomIn:this.diagram.zoomIn,zoomOut:this.diagram.zoomOut,configureComponent:this.showEditComponent}),a.a.createElement(h.a,{id:"tooltip",globalEventOff:"click"}),a.a.createElement(Ko,{open:d.open,type:d.type,message:d.message,timeout:d.timeout,handleClose:this.hideSnackbar}))}}]),n}(i.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(a.a.createElement(zc,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))}},[[273,1,2]]]);
//# sourceMappingURL=main.d35d86e1.chunk.js.map